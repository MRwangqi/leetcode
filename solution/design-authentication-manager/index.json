{
	"titleSlug": "design-authentication-manager",
	"slug": "-by-1105389168-yjt1",
	"url": "https://leetcode-cn.com/problems/design-authentication-manager/solution/-by-1105389168-yjt1/",
	"content": "![企业微信截图_1a0dc976-c959-48ee-8449-09039f3d00ec.png](https://pic.leetcode-cn.com/1659196294-tEScZJ-%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_1a0dc976-c959-48ee-8449-09039f3d00ec.png)\n```typescript []\nclass AuthenticationManager {\n  timeToLive: number;\n  manager: Map<string, number>;\n\n  constructor(timeToLive: number) {\n    // 过期时长\n    this.timeToLive = timeToLive;\n    // 存储 tokenId\n    this.manager = new Map();\n  }\n\n  generate(tokenId: string, currentTime: number): void {\n    this.manager.set(tokenId, currentTime);\n  }\n\n  renew(tokenId: string, currentTime: number): void {\n    if (this.manager.has(tokenId)) {\n      let time = this.manager.get(tokenId);\n      if (time + this.timeToLive > currentTime) {\n        this.manager.set(tokenId, currentTime);\n      }\n    }\n  }\n\n  countUnexpiredTokens(currentTime: number): number {\n    let result = 0;\n    for (const time of this.manager.values()) {\n      time + this.timeToLive > currentTime && ++result;\n    }\n    return result;\n  }\n}\n\n\n```\n```javascript []\nvar AuthenticationManager = function (timeToLive) {\n  // 过期时长\n  this.timeToLive = timeToLive;\n  // 存储 tokenId\n  this.manager = new Map();\n};\n\nAuthenticationManager.prototype.generate = function (tokenId, currentTime) {\n  this.manager.set(tokenId, currentTime);\n};\n\nAuthenticationManager.prototype.renew = function (tokenId, currentTime) {\n  if (this.manager.has(tokenId)) {\n    let time = this.manager.get(tokenId);\n    if (time + this.timeToLive > currentTime) {\n      this.manager.set(tokenId, currentTime)\n    }\n  }\n};\n\nAuthenticationManager.prototype.countUnexpiredTokens = function (currentTime) {\n  let result = 0;\n  for (const time of this.manager.values()) {\n    (time + this.timeToLive > currentTime) && ++result;\n  }\n  return result;\n};\n\n```"
}