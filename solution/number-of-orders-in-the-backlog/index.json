{
	"titleSlug": "number-of-orders-in-the-backlog",
	"slug": "zui-da-dui-zui-xiao-du-by-jushuai_lfx-u36b",
	"url": "https://leetcode-cn.com/problems/number-of-orders-in-the-backlog/solution/zui-da-dui-zui-xiao-du-by-jushuai_lfx-u36b/",
	"content": "\n\n### 代码\n\n```cpp\nclass Solution {\npublic:\n    int getNumberOfBacklogOrders(vector<vector<int>>& orders) {\n        priority_queue<pair<int, int>, vector<pair<int, int>>, greater<pair<int, int>>> sell;\n        priority_queue<pair<int, int>> buy;\n        for (vector<int>& v : orders) {\n            int price = v[0];\n            int amount = v[1];\n            int type = v[2];\n            if (type) {\n                while (buy.empty() == 0 && amount > 0 && buy.top().first >= price) {\n                    pair<int, int> pa = buy.top();\n                    buy.pop();\n                    int num = min(amount, pa.second);\n                    pa.second -= num;\n                    amount -= num;\n                    if (pa.second > 0) {\n                        buy.push(pa);\n                    }\n                }\n                if (amount > 0) {\n                    sell.push({price, amount});\n                }\n            } else {\n                while (sell.empty() == 0 && amount > 0 && sell.top().first <= price) {\n                    pair<int, int> pa = sell.top();\n                    sell.pop();\n                    int num = min(amount, pa.second);\n                    pa.second -= num;\n                    amount -= num;\n                    if (pa.second > 0) {\n                        sell.push(pa);\n                    }\n                }\n                if (amount > 0) {\n                    buy.push({price, amount});\n                }\n            }\n        }\n        long long ans = 0;\n        while (buy.empty() == 0) {\n            ans += buy.top().second;\n            buy.pop();\n        }\n        while (sell.empty() == 0) {\n            ans += sell.top().second;\n            sell.pop();\n        }\n        return ans % 1000000007;\n    }\n};\n```"
}