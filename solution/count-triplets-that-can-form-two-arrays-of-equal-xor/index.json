{
	"titleSlug": "count-triplets-that-can-form-two-arrays-of-equal-xor",
	"slug": "xing-cheng-liang-ge-yi-huo-xiang-deng-sh-jud0",
	"url": "https://leetcode-cn.com/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/solution/xing-cheng-liang-ge-yi-huo-xiang-deng-sh-jud0/",
	"content": "#### å‰è¨€\n\nç”¨ $\\oplus$ è¡¨ç¤ºæŒ‰ä½å¼‚æˆ–è¿ç®—ã€‚\n\nå®šä¹‰é•¿åº¦ä¸º $n$ çš„æ•°ç»„ $\\textit{arr}$ çš„å¼‚æˆ–å‰ç¼€å’Œ\n\n$$\nS_i =\n\\begin{cases} \n0,&i=0\\\\\n\\textit{arr}_0\\oplus\\textit{arr}_1\\oplus\\cdots\\oplus\\textit{arr}_{i-1},&1\\le i\\le n\n\\end{cases}\n$$\n\nç”±è¯¥å®šä¹‰å¯å¾—\n\n$$\nS_i =\n\\begin{cases} \n0,&i=0\\\\\nS_{i-1}\\oplus\\textit{arr}_{i-1},&1\\le i\\le n\n\\end{cases}\n$$\n\nè¿™æ˜¯ä¸€ä¸ªå…³äº $S_i$ çš„é€’æ¨å¼ï¼Œæ ¹æ®è¯¥é€’æ¨å¼æˆ‘ä»¬å¯ä»¥ç”¨ $O(n)$ çš„æ—¶é—´å¾—åˆ°æ•°ç»„ $\\textit{arr}$ çš„å¼‚æˆ–å‰ç¼€å’Œæ•°ç»„ã€‚\n\nå¯¹äºä¸¤ä¸ªä¸‹æ ‡ä¸åŒçš„å¼‚æˆ–å‰ç¼€å’Œ $S_i$ å’Œ $S_j$ï¼Œè®¾ $0<i<j$ï¼Œæœ‰\n\n$$\nS_i\\oplus S_j=(\\textit{arr}_0\\oplus\\textit{arr}_1\\oplus\\cdots\\oplus\\textit{arr}_{i-1})\\oplus(\\textit{arr}_0\\oplus\\textit{arr}_1\\oplus\\cdots\\oplus\\textit{arr}_{i-1}\\oplus\\textit{arr}_i\\oplus\\cdots\\oplus\\textit{arr}_{j-1}ï¼‰\n$$\n\nç”±äºå¼‚æˆ–è¿ç®—æ»¡è¶³ç»“åˆå¾‹å’Œäº¤æ¢å¾‹ï¼Œä¸”ä»»æ„æ•°å¼‚æˆ–è‡ªèº«ç­‰äº $0$ï¼Œä¸Šå¼å¯åŒ–ç®€ä¸º\n\n$$\nS_i\\oplus S_j=\\textit{arr}_i\\oplus\\cdots\\oplus\\textit{arr}_{j-1}\n$$\n\nä»è€Œï¼Œæ•°ç»„ $\\textit{arr}$ çš„å­åŒºé—´ $[i,j]$ çš„å…ƒç´ å¼‚æˆ–å’Œä¸ºå¯è¡¨ç¤ºä¸º\n\n$$\nS_i\\oplus S_{j+1}\n$$\n\nå› æ­¤é—®é¢˜ä¸­çš„ $a$ å’Œ $b$ å¯è¡¨ç¤ºä¸º\n\n$$\n\\begin{aligned}\n&a=S_i\\oplus S_{j}\\\\\n&b=S_j\\oplus S_{k+1}\n\\end{aligned}\n$$\n\nè‹¥ $a=b$ï¼Œåˆ™æœ‰\n\n$$\nS_i\\oplus S_{j}=S_j\\oplus S_{k+1}\n$$\n\nå³\n\n$$\nS_i=S_{k+1}\n$$\n\n#### æ–¹æ³•ä¸€ï¼šä¸‰é‡å¾ªç¯\n\nè®¡ç®—æ•°ç»„ $\\textit{arr}$ çš„å¼‚æˆ–å‰ç¼€å’Œ $S$ï¼Œæšä¸¾ç¬¦åˆ $0\\le i<j\\le k<n$ çš„ä¸‹æ ‡ $i$ï¼Œ$j$ å’Œ $k$ï¼Œç»Ÿè®¡æ»¡è¶³ç­‰å¼ $S_i=S_{k+1}$ çš„ä¸‰å…ƒç»„ä¸ªæ•°ã€‚\n\n```C++ [sol1-C++]\nclass Solution {\npublic:\n    int countTriplets(vector<int> &arr) {\n        int n = arr.size();\n        vector<int> s(n + 1);\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        int ans = 0;\n        for (int i = 0; i < n; ++i) {\n            for (int j = i + 1; j < n; ++j) {\n                for (int k = j; k < n; ++k) {\n                    if (s[i] == s[k + 1]) {\n                        ++ans;\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n};\n```\n\n```Java [sol1-Java]\nclass Solution {\n    public int countTriplets(int[] arr) {\n        int n = arr.length;\n        int[] s = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        int ans = 0;\n        for (int i = 0; i < n; ++i) {\n            for (int j = i + 1; j < n; ++j) {\n                for (int k = j; k < n; ++k) {\n                    if (s[i] == s[k + 1]) {\n                        ++ans;\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n}\n```\n\n```C# [sol1-C#]\npublic class Solution {\n    public int CountTriplets(int[] arr) {\n        int n = arr.Length;\n        int[] s = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        int ans = 0;\n        for (int i = 0; i < n; ++i) {\n            for (int j = i + 1; j < n; ++j) {\n                for (int k = j; k < n; ++k) {\n                    if (s[i] == s[k + 1]) {\n                        ++ans;\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n}\n```\n\n```go [sol1-Golang]\nfunc countTriplets(arr []int) (ans int) {\n    n := len(arr)\n    s := make([]int, n+1)\n    for i, val := range arr {\n        s[i+1] = s[i] ^ val\n    }\n    for i := 0; i < n; i++ {\n        for j := i + 1; j < n; j++ {\n            for k := j; k < n; k++ {\n                if s[i] == s[k+1] {\n                    ans++\n                }\n            }\n        }\n    }\n    return\n}\n```\n\n```Python [sol1-Python3]\nclass Solution:\n    def countTriplets(self, arr: List[int]) -> int:\n        n = len(arr)\n        s = [0]\n        for val in arr:\n            s.append(s[-1] ^ val)\n        \n        ans = 0\n        for i in range(n):\n            for j in range(i + 1, n):\n                for k in range(j, n):\n                    if s[i] == s[k + 1]:\n                        ans += 1\n        \n        return ans\n```\n\n```JavaScript [sol1-JavaScript]\nvar countTriplets = function(arr) {\n    const n = arr.length;\n    const s = [0];\n    for (const num of arr) {\n        s.push(s[s.length - 1] ^ num);\n    }\n\n    let ans = 0;\n    for (let i = 0; i < n; i++) {\n        for (let j = i + 1; j < n; j++) {\n            for (let k = j; k < n; k++) {\n                if (s[i] === s[k + 1]) {\n                    ans++;\n                }\n            }\n        }\n    }\n\n    return ans;\n};\n```\n\n```C [sol1-C]\nint countTriplets(int* arr, int arrSize) {\n    int n = arrSize;\n    int s[n + 1];\n    s[0] = 0;\n    for (int i = 0; i < n; ++i) {\n        s[i + 1] = s[i] ^ arr[i];\n    }\n    int ans = 0;\n    for (int i = 0; i < n; ++i) {\n        for (int j = i + 1; j < n; ++j) {\n            for (int k = j; k < n; ++k) {\n                if (s[i] == s[k + 1]) {\n                    ++ans;\n                }\n            }\n        }\n    }\n    return ans;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^3)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\\textit{arr}$ çš„é•¿åº¦ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚\n\n#### æ–¹æ³•äºŒï¼šäºŒé‡å¾ªç¯\n\nå½“ç­‰å¼ $S_i=S_{k+1}$ æˆç«‹æ—¶ï¼Œ$[i+1, k]$ çš„èŒƒå›´å†…çš„ä»»æ„ $j$ éƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œå¯¹åº”çš„ä¸‰å…ƒç»„ä¸ªæ•°ä¸º $k-i$ã€‚å› æ­¤æˆ‘ä»¬åªéœ€æšä¸¾ä¸‹æ ‡ $i$ å’Œ $k$ã€‚\n\n**ä»£ç **\n\n```C++ [sol2-C++]\nclass Solution {\npublic:\n    int countTriplets(vector<int> &arr) {\n        int n = arr.size();\n        vector<int> s(n + 1);\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        int ans = 0;\n        for (int i = 0; i < n; ++i) {\n            for (int k = i + 1; k < n; ++k) {\n                if (s[i] == s[k + 1]) {\n                    ans += k - i;\n                }\n            }\n        }\n        return ans;\n    }\n};\n```\n\n```Java [sol2-Java]\nclass Solution {\n    public int countTriplets(int[] arr) {\n        int n = arr.length;\n        int[] s = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        int ans = 0;\n        for (int i = 0; i < n; ++i) {\n            for (int k = i + 1; k < n; ++k) {\n                if (s[i] == s[k + 1]) {\n                    ans += k - i;\n                }\n            }\n        }\n        return ans;\n    }\n}\n```\n\n```C# [sol2-C#]\npublic class Solution {\n    public int CountTriplets(int[] arr) {\n        int n = arr.Length;\n        int[] s = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        int ans = 0;\n        for (int i = 0; i < n; ++i) {\n            for (int k = i + 1; k < n; ++k) {\n                if (s[i] == s[k + 1]) {\n                    ans += k - i;\n                }\n            }\n        }\n        return ans;\n    }\n}\n```\n\n```go [sol2-Golang]\nfunc countTriplets(arr []int) (ans int) {\n    n := len(arr)\n    s := make([]int, n+1)\n    for i, val := range arr {\n        s[i+1] = s[i] ^ val\n    }\n    for i := 0; i < n; i++ {\n        for k := i + 1; k < n; k++ {\n            if s[i] == s[k+1] {\n                ans += k - i\n            }\n        }\n    }\n    return\n}\n```\n\n```Python [sol2-Python3]\nclass Solution:\n    def countTriplets(self, arr: List[int]) -> int:\n        n = len(arr)\n        s = [0]\n        for val in arr:\n            s.append(s[-1] ^ val)\n        \n        ans = 0\n        for i in range(n):\n            for k in range(i + 1, n):\n                if s[i] == s[k + 1]:\n                    ans += k - i\n        \n        return ans\n```\n\n```JavaScript [sol2-JavaScript]\nvar countTriplets = function(arr) {\n    const n = arr.length;\n    const s = [0];\n    for (const num of arr) {\n        s.push(s[s.length - 1] ^ num);\n    }\n\n    let ans = 0;\n    for (let i = 0; i < n; i++) {\n        for (let k = i + 1; k < n; k++) {\n            if (s[i] === s[k + 1]) {\n                ans += k - i;\n            }\n        }\n    }\n\n    return ans;\n};\n```\n\n```C [sol2-C]\nint countTriplets(int* arr, int arrSize) {\n    int n = arrSize;\n    int s[n + 1];\n    s[0] = 0;\n    for (int i = 0; i < n; ++i) {\n        s[i + 1] = s[i] ^ arr[i];\n    }\n    int ans = 0;\n    for (int i = 0; i < n; ++i) {\n        for (int k = i + 1; k < n; ++k) {\n            if (s[i] == s[k + 1]) {\n                ans += k - i;\n            }\n        }\n    }\n    return ans;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\\textit{arr}$ çš„é•¿åº¦ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚\n\n#### æ–¹æ³•ä¸‰ï¼šå“ˆå¸Œè¡¨ï¼ˆä¸€é‡å¾ªç¯ï¼‰\n\nå¯¹äºä¸‹æ ‡ $k$ï¼Œè‹¥ä¸‹æ ‡ $i=i_1,i_2,\\cdots,i_m$ æ—¶å‡æ»¡è¶³ $S_i=S_{k+1}$ï¼Œæ ¹æ®æ–¹æ³•äºŒï¼Œè¿™äº›äºŒå…ƒç»„ $(i_1,k),(i_2,k),\\cdots,(i_m,k)$ å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¹‹å’Œä¸º\n\n$$\n(k-i_1)+(k-i_2)+\\cdots+(k-i_m)=m\\cdot k-(i_1+i_2+\\cdots+i_m)\n$$\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éå†ä¸‹æ ‡ $k$ æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ‰€æœ‰æ»¡è¶³ $S_i=S_{k+1}$ çš„\n\n- ä¸‹æ ‡ $i$ çš„å‡ºç°æ¬¡æ•° $m$\n- ä¸‹æ ‡ $i$ ä¹‹å’Œ\n\nè¿™å¯ä»¥å€ŸåŠ©ä¸¤ä¸ªå“ˆå¸Œè¡¨æ¥åšåˆ°ï¼Œåœ¨éå†ä¸‹æ ‡ $k$ çš„åŒæ—¶ï¼Œä¸€ä¸ªå“ˆå¸Œè¡¨ç»Ÿè®¡ $S_k$ çš„å‡ºç°æ¬¡æ•°ï¼Œå¦ä¸€ä¸ªå“ˆå¸Œè¡¨ç»Ÿè®¡å€¼ä¸º $S_k$ çš„ä¸‹æ ‡ä¹‹å’Œã€‚\n\n```C++ [sol3-C++]\nclass Solution {\npublic:\n    int countTriplets(vector<int> &arr) {\n        int n = arr.size();\n        vector<int> s(n + 1);\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        unordered_map<int, int> cnt, total;\n        int ans = 0;\n        for (int k = 0; k < n; ++k) {\n            if (cnt.count(s[k + 1])) {\n                ans += cnt[s[k + 1]] * k - total[s[k + 1]];\n            }\n            ++cnt[s[k]];\n            total[s[k]] += k;\n        }\n        return ans;\n    }\n};\n```\n\n```Java [sol3-Java]\nclass Solution {\n    public int countTriplets(int[] arr) {\n        int n = arr.length;\n        int[] s = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        Map<Integer, Integer> cnt = new HashMap<Integer, Integer>();\n        Map<Integer, Integer> total = new HashMap<Integer, Integer>();\n        int ans = 0;\n        for (int k = 0; k < n; ++k) {\n            if (cnt.containsKey(s[k + 1])) {\n                ans += cnt.get(s[k + 1]) * k - total.get(s[k + 1]);\n            }\n            cnt.put(s[k], cnt.getOrDefault(s[k], 0) + 1);\n            total.put(s[k], total.getOrDefault(s[k], 0) + k);\n        }\n        return ans;\n    }\n}\n```\n\n```C# [sol3-C#]\npublic class Solution {\n    public int CountTriplets(int[] arr) {\n        int n = arr.Length;\n        int[] s = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            s[i + 1] = s[i] ^ arr[i];\n        }\n        Dictionary<int, int> cnt = new Dictionary<int, int>();\n        Dictionary<int, int> total = new Dictionary<int, int>();\n        int ans = 0;\n        for (int k = 0; k < n; ++k) {\n            if (cnt.ContainsKey(s[k + 1])) {\n                ans += cnt[s[k + 1]] * k - total[s[k + 1]];\n            }\n            if (!cnt.ContainsKey(s[k])) {\n                cnt.Add(s[k], 1);\n            } else {\n                ++cnt[s[k]];\n            }\n            if (!total.ContainsKey(s[k])) {\n                total.Add(s[k], k);\n            } else {\n                total[s[k]] += k;\n            }\n        }\n        return ans;\n    }\n}\n```\n\n```go [sol3-Golang]\nfunc countTriplets(arr []int) (ans int) {\n    n := len(arr)\n    s := make([]int, n+1)\n    for i, v := range arr {\n        s[i+1] = s[i] ^ v\n    }\n    cnt := map[int]int{}\n    total := map[int]int{}\n    for k := 0; k < n; k++ {\n        if m, has := cnt[s[k+1]]; has {\n            ans += m*k - total[s[k+1]]\n        }\n        cnt[s[k]]++\n        total[s[k]] += k\n    }\n    return\n}\n```\n\n```Python [sol3-Python3]\nclass Solution:\n    def countTriplets(self, arr: List[int]) -> int:\n        n = len(arr)\n        s = [0]\n        for val in arr:\n            s.append(s[-1] ^ val)\n        \n        cnt, total = Counter(), Counter()\n        ans = 0\n        for k in range(n):\n            if s[k + 1] in cnt:\n                ans += cnt[s[k + 1]] * k - total[s[k + 1]]\n            cnt[s[k]] += 1\n            total[s[k]] += k\n\n        return ans\n```\n\n```JavaScript [sol3-JavaScript]\nvar countTriplets = function(arr) {\n    const n = arr.length;\n    s = [0];\n    for (const num of arr) {\n        s.push(s[s.length - 1] ^ num);\n    }\n\n    const cnt = new Map(), total = new Map();\n    let ans = 0;\n    for (let k = 0; k < n; k++) {\n        if (cnt.has(s[k + 1])) {\n            ans += cnt.get(s[k + 1]) * k - total.get(s[k + 1]);\n        }\n        cnt.set(s[k], (cnt.get(s[k]) || 0) + 1);\n        total.set(s[k], (total.get(s[k]) || 0) + k);\n    }\n\n    return ans;\n};\n```\n\n```C [sol3-C]\nstruct HashTable {\n    int val, key;\n    UT_hash_handle hh;\n};\n\nbool count(struct HashTable* hashTable, int x) {\n    struct HashTable* tmp;\n    HASH_FIND_INT(hashTable, &x, tmp);\n    return tmp != NULL;\n}\n\nint getValue(struct HashTable* hashTable, int x) {\n    struct HashTable* tmp;\n    HASH_FIND_INT(hashTable, &x, tmp);\n    return tmp == NULL ? 0 : tmp->val;\n}\n\nvoid addValue(struct HashTable** hashTable, int x, int y) {\n    struct HashTable* tmp;\n    HASH_FIND_INT(*hashTable, &x, tmp);\n    if (tmp == NULL) {\n        tmp = malloc(sizeof(struct HashTable));\n        tmp->key = x;\n        tmp->val = y;\n        HASH_ADD_INT(*hashTable, key, tmp);\n    } else {\n        tmp->val += y;\n    }\n}\n\nint countTriplets(int* arr, int arrSize) {\n    int n = arrSize;\n    int s[n + 1];\n    s[0] = 0;\n    for (int i = 0; i < n; ++i) {\n        s[i + 1] = s[i] ^ arr[i];\n    }\n    struct HashTable *cnt = NULL, *total = NULL;\n    int ans = 0;\n    for (int k = 0; k < n; ++k) {\n        if (count(cnt, s[k + 1])) {\n            ans += getValue(cnt, s[k + 1]) * k - getValue(total, s[k + 1]);\n        }\n        addValue(&cnt, s[k], 1);\n        addValue(&total, s[k], k);\n    }\n    return ans;\n}\n```\n\n**ä¼˜åŒ–**\n\næˆ‘ä»¬å¯ä»¥åœ¨è®¡ç®—å¼‚æˆ–å‰ç¼€å’Œçš„åŒæ—¶è®¡ç®—ç­”æ¡ˆï¼Œä»è€Œåšåˆ°ä»…éå† $\\textit{arr}$ ä¸€æ¬¡å°±è®¡ç®—å‡ºç­”æ¡ˆã€‚\n\n```C++ [sol4-C++]\nclass Solution {\npublic:\n    int countTriplets(vector<int> &arr) {\n        int n = arr.size();\n        unordered_map<int, int> cnt, total;\n        int ans = 0, s = 0;\n        for (int k = 0; k < n; ++k) {\n            int val = arr[k];\n            if (cnt.count(s ^ val)) {\n                ans += cnt[s ^ val] * k - total[s ^ val];\n            }\n            ++cnt[s];\n            total[s] += k;\n            s ^= val;\n        }\n        return ans;\n    }\n};\n```\n\n```Java [sol4-Java]\nclass Solution {\n    public int countTriplets(int[] arr) {\n        int n = arr.length;\n        Map<Integer, Integer> cnt = new HashMap<Integer, Integer>();\n        Map<Integer, Integer> total = new HashMap<Integer, Integer>();\n        int ans = 0, s = 0;\n        for (int k = 0; k < n; ++k) {\n            int val = arr[k];\n            if (cnt.containsKey(s ^ val)) {\n                ans += cnt.get(s ^ val) * k - total.get(s ^ val);\n            }\n            cnt.put(s, cnt.getOrDefault(s, 0) + 1);\n            total.put(s, total.getOrDefault(s, 0) + k);\n            s ^= val;\n        }\n        return ans;\n    }\n}\n```\n\n```C# [sol4-C#]\npublic class Solution {\n    public int CountTriplets(int[] arr) {\n        int n = arr.Length;\n        Dictionary<int, int> cnt = new Dictionary<int, int>();\n        Dictionary<int, int> total = new Dictionary<int, int>();\n        int ans = 0, s = 0;\n        for (int k = 0; k < n; ++k) {\n            int val = arr[k];\n            if (cnt.ContainsKey(s ^ val)) {\n                ans += cnt[s ^ val] * k - total[s ^ val];\n            }\n            if (!cnt.ContainsKey(s)) {\n                cnt.Add(s, 1);\n            } else {\n                ++cnt[s];\n            }\n            if (!total.ContainsKey(s)) {\n                total.Add(s, k);\n            } else {\n                total[s] += k;\n            }\n            s ^= val;\n        }\n        return ans;\n    }\n}\n```\n\n```go [sol4-Golang]\nfunc countTriplets(arr []int) (ans int) {\n    cnt := map[int]int{}\n    total := map[int]int{}\n    s := 0\n    for k, val := range arr {\n        if m, has := cnt[s^val]; has {\n            ans += m*k - total[s^val]\n        }\n        cnt[s]++\n        total[s] += k\n        s ^= val\n    }\n    return\n}\n```\n\n```Python [sol4-Python3]\nclass Solution:\n    def countTriplets(self, arr: List[int]) -> int:\n        cnt, total = Counter(), Counter()\n        ans = s = 0\n\n        for k, val in enumerate(arr):\n            if (t := s ^ val) in cnt:\n                ans += cnt[t] * k - total[t]\n            cnt[s] += 1\n            total[s] += k\n            s = t\n\n        return ans\n```\n\n```JavaScript [sol4-JavaScript]\nvar countTriplets = function(arr) {\n    const cnt = new Map(), total = new Map();\n    let ans = 0, s = 0;\n\n    for (const [k, val] of arr.entries()) {\n        const t = s ^ val;\n        if (cnt.has(t)) {\n            ans += cnt.get(t) * k - total.get(t);\n        }\n        cnt.set(s, (cnt.get(s) || 0) + 1);\n        total.set(s, (total.get(s) || 0) + k);\n        s = t;\n    }\n    return ans;\n};\n```\n\n```C [sol4-C]\nstruct HashTable {\n    int val, key;\n    UT_hash_handle hh;\n};\n\nbool count(struct HashTable* hashTable, int x) {\n    struct HashTable* tmp;\n    HASH_FIND_INT(hashTable, &x, tmp);\n    return tmp != NULL;\n}\n\nint getValue(struct HashTable* hashTable, int x) {\n    struct HashTable* tmp;\n    HASH_FIND_INT(hashTable, &x, tmp);\n    return tmp == NULL ? 0 : tmp->val;\n}\n\nvoid addValue(struct HashTable** hashTable, int x, int y) {\n    struct HashTable* tmp;\n    HASH_FIND_INT(*hashTable, &x, tmp);\n    if (tmp == NULL) {\n        tmp = malloc(sizeof(struct HashTable));\n        tmp->key = x;\n        tmp->val = y;\n        HASH_ADD_INT(*hashTable, key, tmp);\n    } else {\n        tmp->val += y;\n    }\n}\n\nint countTriplets(int* arr, int arrSize) {\n    int n = arrSize;\n    struct HashTable *cnt = NULL, *total = NULL;\n    int ans = 0, s = 0;\n    for (int k = 0; k < n; ++k) {\n        int val = arr[k];\n        if (count(cnt, s ^ val)) {\n            ans += getValue(cnt, s ^ val) * k - getValue(total, s ^ val);\n        }\n        addValue(&cnt, s, 1);\n        addValue(&total, s, k);\n        s ^= val;\n    }\n    return ans;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„ $\\textit{arr}$ çš„é•¿åº¦ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ $O(n)$ çš„ç©ºé—´å­˜å‚¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ã€‚\n\n---\n## âœ¨æ‰£å‹å¸®å¸®å›¢ - äº’åŠ¨ç­”ç–‘\n\n[![è®¨è®º.jpg](https://pic.leetcode-cn.com/1621178600-MKHFrl-%E8%AE%A8%E8%AE%BA.jpg){:width=260px}](https://leetcode-cn.com/topic/kou-you-bang-bang-tuan/discuss/latest/)\n\n\nå³æ—¥èµ· - 5 æœˆ 30 æ—¥ï¼Œç‚¹å‡»Â [è¿™é‡Œ](https://leetcode-cn.com/topic/kou-you-bang-bang-tuan/discuss/latest/)Â å‰å¾€ã€Œ[æ‰£å‹å¸®å¸®å›¢](https://leetcode-cn.com/topic/kou-you-bang-bang-tuan/discuss/latest/)ã€æ´»åŠ¨é¡µï¼ŒæŠŠä½ é‡åˆ°çš„é—®é¢˜å¤§èƒ†åœ°æå‡ºæ¥ï¼Œè®©æ‰£å‹ä¸ºä½ è§£ç­”ï½\n\n### ğŸ å¥–åŠ±è§„åˆ™\nè¢«é‡‡çº³æ•°é‡æ’å 1ï½3 åï¼šã€ŒåŠ›æ‰£æå®¢å¥—è£…ã€ *1 å¹¶å°†è·å¾—ã€ŒåŠ›æ‰£ç¥ç§˜åº”æ´å›¢ã€å†…æµ‹èµ„æ ¼\nè¢«é‡‡çº³æ•°é‡æ’å 4ï½10 åï¼šã€ŒåŠ›æ‰£é¼ æ ‡å«ã€ *1 å¹¶å°†è·å¾—ã€ŒåŠ›æ‰£ç¥ç§˜åº”æ´å›¢ã€å†…æµ‹èµ„æ ¼\nã€Œè¯²äººä¸å€¦ã€ï¼šæ´»åŠ¨æœŸé—´ã€Œè§£æƒ‘è€…ã€åªè¦æœ‰ 1 ä¸ªå›ç­”è¢«é‡‡çº³ï¼Œå³å¯è·å¾— 20 LeetCoins å¥–åŠ±ï¼\nã€Œæ±‚çŸ¥è‹¥æ¸´ã€ï¼šæ´»åŠ¨æœŸé—´ã€Œæ±‚çŸ¥è€…ã€åœ¨æ´»åŠ¨é¡µå‘èµ·ä¸€æ¬¡ç¬¦åˆè¦æ±‚çš„ç–‘é—®å¸–å¹¶è‡³å°‘é‡‡çº³ä¸€æ¬¡ã€Œè§£æƒ‘è€…ã€çš„å›ç­”ï¼Œå³å¯è·å¾— 20 LeetCoins å¥–åŠ±ï¼\n\næ´»åŠ¨è¯¦æƒ…çŒ›æˆ³é“¾æ¥äº†è§£æ›´å¤šï¼š[æ´»åŠ¨ï½œä½ æœ‰ BUG æˆ‘æ¥å¸® - åŠ›æ‰£äº’åŠ¨ç­”ç–‘å­£](https://leetcode-cn.com/circle/discuss/xtliW6/)"
}