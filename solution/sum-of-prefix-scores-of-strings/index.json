{
	"titleSlug": "sum-of-prefix-scores-of-strings",
	"slug": "by-lfool-w82u",
	"url": "https://leetcode-cn.com/problems/sum-of-prefix-scores-of-strings/solution/by-lfool-w82u/",
	"content": "# [å¦‚æœæƒ³è¦æŸ¥çœ‹ä½œè€…æ›´å¤šæ–‡ç« ï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„ï¼ï¼ï¼ğŸ”¥ğŸ”¥ğŸ”¥](https://lfool.github.io/LFool-Notes/)\n\n# [ä¸ºäº†æœ¬ç¯‡æ–‡ç« æ›´å¥½çš„è§‚æ„Ÿï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„ï¼ï¼ï¼](https://lfool.github.io/LFool-Notes/algorithm/è¯¦è§£å‰ç¼€æ ‘TrieTree.html)\n\n[208. å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode.cn/problems/implement-trie-prefix-tree/)\n\n[648. å•è¯æ›¿æ¢](https://leetcode.cn/problems/replace-words/)\n\n[211. æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](https://leetcode.cn/problems/design-add-and-search-words-data-structure/)\n\n[677. é”®å€¼æ˜ å°„](https://leetcode.cn/problems/map-sum-pairs/)\n\n[676. å®ç°ä¸€ä¸ªé­”æ³•å­—å…¸](https://leetcode.cn/problems/implement-magic-dictionary/)\n\n[745. å‰ç¼€å’Œåç¼€æœç´¢](https://leetcode.cn/problems/prefix-and-suffix-search/)\n\n[6183. å­—ç¬¦ä¸²çš„å‰ç¼€åˆ†æ•°å’Œ](https://leetcode.cn/problems/sum-of-prefix-scores-of-strings/)\n\n---\n\n***å¦‚æœåªæƒ³çœ‹æœ¬é¢˜çš„è§£æ³•ï¼Œå¯ç›´æ¥è·³åˆ°æ–‡ç« æœ«å°¾ï¼Œæœ‰è¯¦ç»†åˆ†æè¿‡ç¨‹ï¼ï¼ğŸ”¥ğŸ”¥ğŸ”¥***\n\n---\n\nã€Œå‰ç¼€æ ‘ã€åˆå«ã€Œå­—å…¸æ ‘ã€æˆ–ã€Œå•è¯æŸ¥æ‰¾æ ‘ã€ï¼Œæ€»ä¹‹å®ƒä»¬æ˜¯ä¸€ä¸ªæ„æ€ï¼\n\nã€Œå‰ç¼€æ ‘ã€çš„åº”ç”¨åœºæ™¯ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²é›†åˆæ„å»ºä¸€æ£µå‰ç¼€æ ‘ï¼Œç„¶åç»™ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å‰ç¼€æ ‘ä¸­æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦ä¸²æˆ–è€…è¯¥å­—ç¬¦ä¸²çš„å‰ç¼€\n\nå¯ä»¥ç»“åˆé¢˜ç›® **[å•è¯æ›¿æ¢](https://leetcode.cn/problems/replace-words/)** ç†è§£ï¼æˆ‘ä»¬éœ€è¦æ ¹æ® `dictionary` æ„å»ºå‰ç¼€æ ‘ï¼Œç„¶ååˆ¤æ–­ `sentence` ä¸­çš„æ¯ä¸ªå•è¯æ˜¯å¦åœ¨å‰ç¼€æ ‘ä¸­\n\n## åˆ†æ\n\nä¸€èˆ¬è€Œè¨€ï¼Œå­—ç¬¦ä¸²çš„é›†åˆéƒ½æ˜¯ä»…ç”±å°å†™å­—æ¯æ„æˆï¼Œæ‰€ä»¥æœ¬æ–‡ç« éƒ½æ˜¯åŸºäºè¯¥æƒ…å†µå±•å¼€åˆ†æï¼\n\nå­—ç¬¦ä¸²é›†åˆï¼š`[them, zip, team, the, app, that]`ã€‚è¿™ä¸ªæ ·ä¾‹çš„å‰ç¼€æ ‘é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ\n\n![1.svg](https://pic.leetcode-cn.com/1657540498-HHnzlV-1.svg)\n\nç”±äºéƒ½æ˜¯å°å†™å­—æ¯ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œå‡æœ‰ 26 ä¸ªå­©å­èŠ‚ç‚¹ï¼Œä¸Šå›¾ä¸­æ²¡æœ‰ç”»å‡ºæ¥ï¼Œçœç•¥äº†è€Œå·²...ï¼Œä½†æ˜¯è¦è®°ä½ï¼š**æ¯ä¸ªèŠ‚ç‚¹å‡æœ‰ 26 ä¸ªå­©å­èŠ‚ç‚¹**\n\n**è¿˜æœ‰ä¸€ä¸ªç‚¹è¦æ˜ç¡®ï¼šèŠ‚ç‚¹ä»…ä»…è¡¨ç¤ºä»æ ¹èŠ‚ç‚¹åˆ°æœ¬èŠ‚ç‚¹çš„è·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆè€Œå·²**\n\nå¯¹äºä¸Šå›¾ä¸­æ©™è‰²çš„èŠ‚ç‚¹ï¼Œå‡ä¸ºæœ‰æ•ˆèŠ‚ç‚¹ï¼Œå³ï¼šä»æ ¹èŠ‚ç‚¹åˆ°æ©™è‰²èŠ‚ç‚¹çš„è·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²å‡åœ¨é›†åˆä¸­\n\nå¦‚æœç°åœ¨è¦æ‰¾å‰ç¼€ `te` æ˜¯å¦å­˜åœ¨ï¼Œåˆ†ä¸¤æ­¥ï¼š\n\n- é¦–å…ˆçœ‹çœ‹è¡¨ç¤º `te` å­—ç¬¦ä¸²çš„è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œè¿™ä¸ªä¾‹å­æ˜¯å­˜åœ¨çš„\n- å…¶æ¬¡çœ‹çœ‹è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹æ˜¯å¦æœ‰æ•ˆï¼Œå¾ˆé—æ†¾ï¼Œæ­¤å¤„ä¸ºç™½è‰²ï¼Œæ— æ•ˆ\n- æ‰€ä»¥å‰ç¼€ `te` ä¸å­˜åœ¨ï¼ï¼\n\n## æ•°æ®ç»“æ„\n\nç°åœ¨çœ‹çœ‹å¦‚ä½•è¡¨ç¤ºè¿™æ£µã€Œå‰ç¼€æ ‘ã€ï¼Œå³æ•°æ®ç»“æ„è¯¥å¦‚ä½•å®šä¹‰ã€‚å…¶å®å°±æ˜¯ä¸€æ£µå¤šå‰æ ‘ï¼Œæœ‰ 26 ä¸ªå­©å­èŠ‚ç‚¹çš„å¤šå‰æ ‘è€Œå·²ï¼ï¼\n\nç°åœ¨æ¥æ€è€ƒèŠ‚ç‚¹çš„å€¼åˆè¯¥å¦‚ä½•è¡¨ç¤ºå‘¢ï¼Ÿ\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒèŠ‚ç‚¹ä»…ä»…è¡¨ç¤ºè·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆè€Œå·²ï¼Œæ‰€ä»¥èŠ‚ç‚¹å¯ä»¥ç”¨ `boolean` ç±»å‹æ¥è¡¨ç¤º\n\nè¿˜æœ‰ä¸€ç±»æƒ…å†µå°±æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œæ‰€ä»¥èŠ‚ç‚¹çš„å€¼å¯ä»¥ç”¨ä¸€ä¸ªæ•°å€¼æ¥è¡¨ç¤º\n\n```java\n// å‰ç¼€æ ‘çš„æ•°æ®ç»“æ„\nclass TrieNode {\n    boolean val;\n    TrieNode[] children = new TrieNode[26];\n}\n// å‰ç¼€æ ‘çš„æ ¹èŠ‚ç‚¹\nprivate TrieNode root = new TrieNode();\n```\n\n## å¸¸ç”¨æ“ä½œ\n\næ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œå…¶å®ã€Œå‰ç¼€æ ‘ã€å¸¸ç”¨æ“ä½œå°±ä¸‰ç§\n\n- æ ¹æ®æ‰€ç»™å­—ç¬¦ä¸²é›†åˆæ„å»ºå‰ç¼€æ ‘\n- åˆ¤æ–­å‰ç¼€æ ‘ä¸­æ˜¯å¦å­˜åœ¨ç›®æ ‡å­—ç¬¦ä¸²\n- åœ¨å‰ç¼€æ ‘ä¸­æ‰¾å‡ºç›®æ ‡å­—ç¬¦ä¸²çš„æœ€çŸ­å‰ç¼€\n\n### æ„å»ºå‰ç¼€æ ‘\n\næœ€åˆï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ `root`ï¼Œå­©å­èŠ‚ç‚¹ä¹Ÿéƒ½è¿˜æ²¡åˆå§‹åŒ–ï¼\n\næ‰€ä»¥ç›´æ¥çœ‹ä»£ç ï¼š\n\n```java\n// å¾€å‰ç¼€æ ‘ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²\npublic void insert(String word) {\n    TrieNode p = root;\n    for (char c : word.toCharArray()) {\n        // char -> int\n        int i = c - 'a';\n        // åˆå§‹åŒ–å­©å­èŠ‚ç‚¹\n        if (p.children[i] == null) p.children[i] = new TrieNode();\n        // èŠ‚ç‚¹ä¸‹ç§»\n        p = p.children[i];\n    }\n    // æ­¤æ—¶ p æŒ‡å‘ç›®æ ‡å­—ç¬¦ä¸²çš„ç»ˆç‚¹\n    p.val = true;\n}\n```\n\nä¸ºäº†æ‰©å±•æ€ç»´ï¼Œè¿™é‡Œå†ç»™å‡ºé€’å½’çš„å®ç°æ–¹æ³•ï¼š(å’Œæ ‘çš„éå†å¾ˆåƒ)\n\n```java\npublic TrieNode insert(TrieNode node, String word, int index) {\n    // åˆå§‹åŒ–\n    if (node == null) node = new TrieNode();\n    // åˆ°äº†ç»ˆç‚¹\n    if (index == word.length()) {\n        node.val = true;\n        return node;\n    }\n    int i = word.charAt(index) - 'a';\n    node.children[i] = insert(node.children[i], word, index + 1);\n    return node;\n}\n// è°ƒç”¨æ–¹æ³•\nroot = insert(root, word, 0);\n```\n\n### å¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²\n\nå½“ã€Œå‰ç¼€æ ‘ã€æ„å»ºå¥½äº†åï¼Œå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²ä¹Ÿå°±å¤§åŒå°å¼‚äº†\n\nå¤ä¹ ä¸€ä¸‹å¯»æ‰¾çš„ä¸¤ä¸ªæ­¥éª¤ï¼š\n\n- é¦–å…ˆçœ‹çœ‹è¡¨ç¤ºå­—ç¬¦ä¸²çš„è·¯å¾„æ˜¯å¦å­˜åœ¨\n- å…¶æ¬¡çœ‹çœ‹è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹æ˜¯å¦æœ‰æ•ˆ\n\n```java\npublic boolean query(String word) {\n    TrieNode p = root;\n    for (char c : word.toCharArray()) {\n        int i = c - 'a';\n        // è·¯å¾„ä¸å­˜åœ¨çš„æƒ…å†µï¼Œç›´æ¥è¿”å› false\n        if (p.children[i] == null) return false;\n        p = p.children[i];\n    }\n    // è·¯å¾„å­˜åœ¨ï¼Œç›´æ¥è¿”å›è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹çš„æœ‰æ•ˆæ€§\n    return p.val;\n}\n```\n\nåŒæ ·çš„ï¼Œä¸ºäº†æ‰©å±•æ€ç»´ï¼Œè¿™é‡Œå†ç»™å‡ºé€’å½’çš„å®ç°æ–¹æ³•ï¼š(å’Œæ ‘çš„éå†å¾ˆåƒ)\n\n```java\npublic boolean query(TrieNode node, String word, int index) {\n    // è·¯å¾„ä¸å­˜åœ¨çš„æƒ…å†µ\n    if (node == null) return false;\n    // è·¯å¾„å­˜åœ¨ï¼Œç›´æ¥è¿”å›è¯¥è·¯å¾„çš„ç»ˆç‚¹å¤„çš„èŠ‚ç‚¹çš„æœ‰æ•ˆæ€§\n    if (index == word.length()) return node.val;\n    \n    int i = word.charAt(index) - 'a';\n    return query(node.children[i], word, index + 1);\n}\n// è°ƒç”¨æ–¹æ³•\nquery(root, word, 0);\n```\n\n### å¯»æ‰¾æœ€çŸ­å‰ç¼€\n\nå’Œã€Œå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²ã€å·®ä¸å¤šï¼Œä½†åˆæœ‰äº›è®¸ä¸åŒ\n\n- ã€Œå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸²ã€å¿…é¡»éå†åˆ°ç›®æ ‡å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œç„¶åå†åˆ¤æ–­è·¯å¾„æ˜¯å¦æœ‰æ•ˆ\n\n- ã€Œå¯»æ‰¾æœ€çŸ­å‰ç¼€ã€åªè¦åœ¨éå†çš„è¿‡ç¨‹æœ‰ä¸­ï¼Œé¦–æ¬¡å‡ºç°äº†æœ‰æ•ˆè·¯å¾„ï¼Œå³ä¸ºæ‰¾åˆ°ï¼ï¼\n\n```java\npublic String shortestPrefixOf(String word) {\n    TrieNode p = root;\n    StringBuffer sb = new StringBuffer();\n    for (char c : word.toCharArray()) {\n        int i = c - 'a';\n        // é¦–æ¬¡é‡åˆ°æœ‰æ•ˆè·¯å¾„ï¼Œç›´æ¥è¿”å›\n        if (p.val) return sb.toString();\n        sb.append(c);\n        // è·¯å¾„ä¸å­˜åœ¨çš„æƒ…å†µï¼Œç›´æ¥è¿”å› \"\"\n        if (p.children[i] == null) return \"\";\n        p = p.children[i];\n    }\n    // æ²¡æ‰¾åˆ°\n    return \"\";\n}\n```\n\n## é«˜çº§æ“ä½œ\n\n### å«æœ‰é€šé…ç¬¦çš„å¯»æ‰¾\n\né¡¾åæ€ä¹‰ï¼Œ`.`å¯ä»¥è¡¨ç¤ºä»»ä½•å­—ç¬¦ã€‚æ¯”å¦‚ï¼š`a.c` æ˜¯å¯ä»¥å’Œ `[abc, aec]` åŒ¹é…çš„\n\n```java\npublic boolean keysWithPattern(TrieNode node, String pattern, int index) {\n    if (node == null) return false;\n    if (index == key.length()) return node.val;\n    int i = key.charAt(index) - 'a';\n    // å¦‚æœæ˜¯é€šé…ç¬¦ï¼Œç›´æ¥å’Œ 26 ä¸ªå­—æ¯åŒ¹é… (ç®€å•ç²—æš´ï¼ï¼)\n    if (key.charAt(index) == '.') {\n        for (int j = 0; j < 26; j++) {\n            if (search(node.children[j], key, index + 1)) return true;\n        }\n        return false;\n    } else {\n        return search(node.children[i], key, index + 1);\n    }\n}\n```\n\n## é¢˜ç›®å®æˆ˜\n\n### å®ç° Trie (å‰ç¼€æ ‘)\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode.cn/problems/implement-trie-prefix-tree/)**\n\n```java\nclass Trie {\n    class TrieNode {\n        boolean val;\n        TrieNode[] children = new TrieNode[26];\n    }\n\n    private TrieNode root;\n\n    public Trie() {\n        root = new TrieNode();\n    }\n    \n    public void insert(String word) {\n        TrieNode p = root;\n        for (char c : word.toCharArray()) {\n            int i = c - 'a';\n            if (p.children[i] == null) p.children[i] = new TrieNode();\n            p = p.children[i];\n        }\n        p.val = true;\n    }\n    \n    public boolean search(String word) {\n        TrieNode p = root;\n        for (char c : word.toCharArray()) {\n            int i = c - 'a';\n            if (p.children[i] == null) return false;\n            p = p.children[i];\n        }\n        return p.val;\n    }\n    \n    public boolean startsWith(String prefix) {\n        TrieNode p = root;\n        for (char c : prefix.toCharArray()) {\n            int i = c - 'a';\n            if (p.children[i] == null) return false;\n            p = p.children[i];\n        }\n        return true;\n    }\n}\n```\n\n### å•è¯æ›¿æ¢\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [å•è¯æ›¿æ¢](https://leetcode.cn/problems/replace-words/)**\n\n```java\nclass Solution {\n    class TrieNode {\n        boolean val;\n        TrieNode[] children = new TrieNode[26];\n    }\n    \n    private TrieNode root = new TrieNode();\n    \n    public String replaceWords(List<String> dictionary, String sentence) {\n        for (String d : dictionary) root = insert(root, d, 0);\n        StringBuffer ans = new StringBuffer();\n        for (String s : sentence.split(\" \")) {\n            String q = query(s);\n            if (\"\".equals(q)) ans.append(s).append(\" \");\n            else ans.append(q).append(\" \");\n        }\n        ans.deleteCharAt(ans.length() - 1);\n        return ans.toString();\n    }\n    \n    private TrieNode insert(TrieNode node, String key, int index) {\n        if (node == null) node = new TrieNode();\n        if (index == key.length()) {\n            node.val = true;\n            return node;\n        }\n        int i = key.charAt(index) - 'a';\n        node.children[i] = insert(node.children[i], key, index + 1);\n        return node;\n    }\n    \n    private String query(String key) {\n        TrieNode p = root;\n        StringBuffer ans = new StringBuffer();\n        for (char c : key.toCharArray()) {\n            int i = c - 'a';\n            if (p.val) return ans.toString();\n            ans.append(c);\n            if (p.children[i] == null) return \"\";\n            p = p.children[i];\n        }\n        return \"\";\n    }\n}\n```\n\n### æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](https://leetcode.cn/problems/design-add-and-search-words-data-structure/)**\n\n```java\nclass WordDictionary {\n\n    class TrieNode {\n        boolean val;\n        TrieNode[] children = new TrieNode[26];\n    }\n\n    private TrieNode root;\n\n    public WordDictionary() {\n        root = new TrieNode();\n    }\n    \n    public void addWord(String word) {\n        TrieNode p = root;\n        for (char c : word.toCharArray()) {\n            int i = c - 'a';\n            if (p.children[i] == null) p.children[i] = new TrieNode();\n            p = p.children[i];\n        }\n        p.val = true;\n    }\n    \n    public boolean search(String word) {\n        return search(root, word, 0);\n    }\n\n    private boolean search(TrieNode node, String key, int index) {\n        if (node == null) return false;\n        if (index == key.length()) return node.val;\n        int i = key.charAt(index) - 'a';\n        if (key.charAt(index) == '.') {\n            for (int j = 0; j < 26; j++) {\n                if (search(node.children[j], key, index + 1)) return true;\n            }\n            return false;\n        } else {\n            return search(node.children[i], key, index + 1);\n        }\n    }\n}\n```\n\n### é”®å€¼æ˜ å°„\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [é”®å€¼æ˜ å°„](https://leetcode.cn/problems/map-sum-pairs/)**\n\nè¿™ä¸ªé¢˜ç›®äº›è®¸ä¸åŒï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºçš„ä¸å†æ˜¯æ˜¯å¦æœ‰æ•ˆï¼Œè€Œæ˜¯ä¸€ä¸ªå€¼\n\n```java\nclass MapSum {\n\n    class TrieNode {\n        int val;\n        TrieNode[] children = new TrieNode[26];\n    }\n\n    private TrieNode root;\n\n    public MapSum() {\n        root = new TrieNode();\n    }\n    \n    public void insert(String key, int val) {\n        TrieNode p = root;\n        for (char c : key.toCharArray()) {\n            int i = c - 'a';\n            if (p.children[i] == null) p.children[i] = new TrieNode();\n            p = p.children[i];\n        }\n        p.val = val;\n    }\n    \n    public int sum(String prefix) {\n        TrieNode p = root;\n        // æ‰¾åˆ°å‰ç¼€ prefix çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹\n        for (char c : prefix.toCharArray()) {\n            int i = c - 'a';\n            if (p.children[i] == null) return 0;\n            p = p.children[i];\n        }\n        return getAllSum(p);\n    }\n    // è¾…åŠ©å‡½æ•°ï¼Œæ±‚ä»¥ node ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘çš„èŠ‚ç‚¹å’Œ \n    private int getAllSum(TrieNode node) {\n        if (node == null) return 0;\n        int sum = 0;\n        for (int i = 0; i < 26; i++) {\n            sum += getAllSum(node.children[i]);\n        }\n        return sum + node.val;\n    }\n}\n```\n\n### å®ç°ä¸€ä¸ªé­”æ³•å­—å…¸\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [å®ç°ä¸€ä¸ªé­”æ³•å­—å…¸](https://leetcode.cn/problems/implement-magic-dictionary/)**\n\nç”±äºæœ¬é¢˜ç›®å¿…é¡»æ›¿æ¢ä¸€æ¬¡ï¼Œæ‰€ä»¥é‡‡å–äº†ä¸€ä¸ªå‚»åŠæ³•ï¼šéå†æ¯ä¸€ç§æ›¿æ¢çš„æƒ…å†µ\n\n```java\nclass MagicDictionary {\n\n    class TrieNode {\n        boolean val;\n        TrieNode[] children = new TrieNode[26];\n    }\n\n    private TrieNode root;\n\n    public MagicDictionary() {\n        root = new TrieNode();\n    }\n    \n    public void buildDict(String[] dictionary) {\n        for (String word : dictionary) {\n            TrieNode p = root;\n            for (char c : word.toCharArray()) {\n                int i = c - 'a';\n                if (p.children[i] == null) p.children[i] = new TrieNode();\n                p = p.children[i];\n            }\n            p.val = true;\n        }\n    }\n    \n    public boolean search(String searchWord) {\n        // éå†æ¯ä¸€ç§æ›¿æ¢çš„æƒ…å†µ\n        for (int i = 0; i < searchWord.length(); i++) {\n            if (search(root, searchWord, 0, i)) return true;\n        }\n        return false;\n    }\n\n    private boolean search(TrieNode node, String searchWord, int index, int changeId) {\n        if (node == null) return false;\n        if (index == searchWord.length()) return node.val;\n        int i = searchWord.charAt(index) - 'a';\n        if (index == changeId) {\n            for (int j = 0; j < 26; j++) {\n                if (j == i) continue;\n                if (search(node.children[j], searchWord, index + 1, changeId)) return true;\n            }\n            return false;\n        }\n        return search(node.children[i], searchWord, index + 1, changeId);\n    }\n}\n```\n\n### å‰ç¼€å’Œåç¼€æœç´¢\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [å‰ç¼€å’Œåç¼€æœç´¢](https://leetcode.cn/problems/prefix-and-suffix-search/)**\n\nå‰é¢çš„é¢˜ç›®ï¼ŒèŠ‚ç‚¹è¡¨ç¤ºçš„è¦ä¹ˆæ˜¯æœ‰æ•ˆæ€§ï¼Œè¦ä¹ˆæ˜¯å­—ç¬¦ä¸²çš„æƒå€¼ï¼Œè€Œè¿™ä¸ªé¢˜ç›®éœ€è¦ä»å‰ç¼€å’Œåç¼€åŒæ—¶æœç´¢ ğŸ”\n\næˆ‘ä»¬çš„å¯ä»¥é‡‡å–çš„æ€è·¯ï¼šåŒæ—¶ç»´æŠ¤ä¸¤æ£µæ ‘ -> ã€Œå‰ç¼€æ ‘ã€å’Œã€Œåç¼€æ ‘ã€ï¼Œæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä»¥ã€Œä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹è·¯å¾„æ„æˆçš„å­—ç¬¦ä¸²ã€ä¸ºå‰ç¼€çš„å•è¯çš„ä¸‹æ ‡\n\nè¡¨è¿°çš„å¯èƒ½æ¯”è¾ƒæŠ½è±¡ï¼Œç›´æ¥çœ‹å›¾ï¼š(æˆ‘ä»¬è¿˜æ˜¯ä»¥ `[them, zip, team, the, app, that]` è¿™ä¸ªæ ·ä¾‹ä¸ºåŸºç¡€)\n\n![4.svg](https://pic.leetcode-cn.com/1657779076-lKPawY-4.svg)\n\nå½“æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä»¥ `t` ä¸ºå‰ç¼€ï¼Œä»¥ `m` ä¸ºåç¼€çš„ä¸‹æ ‡æœ€å¤§çš„å­—ç¬¦ä¸²\n\næ˜¾ç„¶æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“æ‰¾åˆ°å›¾ä¸­ç»¿è‰²çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¯¹åº”çš„ä¸‹æ ‡ `List` ä¸º `[0, 2, 3, 5]` å’Œ `[0, 2]`\n\n**è§£é‡Š**ï¼šä»¥ `t` ä¸ºå‰ç¼€çš„å•è¯æœ‰ `[them, team, the, that]`ï¼Œå…¶å¯¹åº”çš„ä¸‹æ ‡ä¸º `[0, 2, 3, 5]`\n\n**åŒç†**ï¼šä»¥ `m` ä¸ºåç¼€çš„å•è¯æœ‰ `[them, team]`ï¼Œå…¶å¯¹åº”çš„ä¸‹æ ‡ä¸º `[0, 2]`\n\nç„¶åæ ¹æ®æœ‰åºé“¾è¡¨åˆå¹¶çš„æ€è·¯ï¼Œä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªç›¸åŒçš„ä¸‹æ ‡ï¼Œå³ä¸ºæœ€å¤§ä¸‹æ ‡ï¼ï¼\n\n```java\nclass WordFilter {\n\n    class TrieNode {\n        List<Integer> list = new ArrayList<>();\n        TrieNode[] children = new TrieNode[26];\n    }\n\n    private TrieNode prefix = new TrieNode();\n    private TrieNode suffix = new TrieNode();\n\n    public WordFilter(String[] words) {\n        build(prefix, words, true);\n        build(suffix, words, false);\n    }\n    \n    public int f(String pref, String suff) {\n        List<Integer> prefList = query(prefix, pref, true);\n        List<Integer> suffList = query(suffix, suff, false);\n        int i = prefList.size() - 1, j = suffList.size() - 1;\n        while (i >= 0 && j >= 0) {\n            // æ³¨æ„ï¼šæ¯”è¾ƒ Integer ç±»å˜é‡æœ€å¥½ä¸è¦ç›´æ¥æ¯”è¾ƒï¼Œè‡ªåŠ¨æ‹†ç®±æˆ int åå†æ¯”è¾ƒ\n            int l1 = prefList.get(i), l2 = suffList.get(j);\n            if (l1 == l2) return l1;\n            else if (l1 > l2) i--;\n            else j--;\n        }\n        return -1;\n    }\n\n    private void build(TrieNode root, String[] words, boolean isPref) {\n        for (int i = 0; i < words.length; i++) {\n            TrieNode p = root;\n            int len = words[i].length();\n            for (int j = isPref ? 0 : len - 1; j >= 0 && j < len; j = isPref ? j + 1 : j - 1) {\n                int cur = words[i].charAt(j) - 'a';\n                if (p.children[cur] == null) p.children[cur] = new TrieNode();\n                p = p.children[cur];\n                p.list.add(i);\n            }\n        }\n    }\n\n    private List<Integer> query(TrieNode root, String s, boolean isPref) {\n        TrieNode p = root;\n        int len = s.length();\n        for (int i = isPref ? 0 : len - 1; i >= 0 && i < len; i = isPref ? i + 1 : i - 1) {\n            int cur = s.charAt(i) - 'a';\n            if (p.children[cur] == null) return new ArrayList<>();\n            p = p.children[cur];\n        }\n        return p.list;\n    }\n}\n```\n\n### å­—ç¬¦ä¸²çš„å‰ç¼€åˆ†æ•°å’Œ\n\n**é¢˜ç›®è¯¦æƒ…å¯è§ [å‰ç¼€å’Œåç¼€æœç´¢](https://leetcode.cn/problems/sum-of-prefix-scores-of-strings/)**\n\nè¿™ä¸ªé¢˜ä¹Ÿæ˜¯ã€Œå‰ç¼€æ ‘ã€çš„æ¨¡ç‰ˆé¢˜ï¼Œåªä¸è¿‡æ¯ä¸ªèŠ‚ç‚¹çš„å«ä¹‰éœ€è¦é‡æ–°å®šä¹‰ä¸€ä¸‹ï¼š**è¡¨ç¤ºä»¥è¯¥è·¯å¾„ä¸ºå‰ç¼€çš„å•è¯æ•°é‡**\n\nå¯èƒ½è¡¨è¿°çš„æœ‰äº›æŠ½è±¡ï¼Œä»¥ `[\"abc\",\"ab\",\"bc\",\"b\"]` ä¸ºä¾‹ï¼Œç›´æ¥çœ‹å›¾ï¼š\n\n![432.svg](https://pic.leetcode-cn.com/1663472794-nWROae-432.svg)\n\næ„å»ºå¥½äº†å‰ç¼€æ ‘ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥è¯¢æŸä¸ªå•è¯çš„å‰ç¼€åˆ†æ•°å’Œï¼Œå¦‚ `\"abc\"`ï¼Œåªéœ€è¦è·¯å¾„ `abc` çš„èŠ‚ç‚¹ç´¯åŠ å³å¯ï¼Œ2 + 2 + 1 = 5\n\nä¸‹é¢ç»™å‡ºä»£ç ï¼š\n\n```java\npublic int[] sumPrefixScores(String[] words) {\n    for (String word : words) {\n        // æ’å…¥æ‰€æœ‰èŠ‚ç‚¹\n        insert(word);\n    }\n    int[] ans = new int[words.length];\n    for (int i = 0; i < words.length; i++) {\n        // æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹\n        ans[i] = query(words[i]);\n    }\n    return ans;\n}\n\n// ********** ä»¥ä¸‹æ˜¯æ¨¡ç‰ˆ **********\n\n// å‰ç¼€æ ‘çš„æ•°æ®ç»“æ„\nclass TrieNode {\n    int val;\n    TrieNode[] children = new TrieNode[26];\n}\n// å‰ç¼€æ ‘çš„æ ¹èŠ‚ç‚¹\nprivate TrieNode root = new TrieNode();\n\n// å¾€å‰ç¼€æ ‘ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²\npublic void insert(String word) {\n    TrieNode p = root;\n    for (char c : word.toCharArray()) {\n        int i = c - 'a';\n        // åˆå§‹åŒ–å­©å­èŠ‚ç‚¹\n        if (p.children[i] == null) p.children[i] = new TrieNode();\n        \n        // æ³¨æ„ï¼šé€”ç»çš„èŠ‚ç‚¹å‡éœ€è¦ â•1\n        p.children[i].val += 1;\n        \n        // èŠ‚ç‚¹ä¸‹ç§»\n        p = p.children[i];\n    }\n}\npublic int query(String word) {\n    TrieNode p = root;\n    int cnt = 0;\n    for (char c : word.toCharArray()) {\n        int i = c - 'a';\n        if (p.children[i] == null) return cnt;\n        p = p.children[i];\n        // ç´¯åŠ èŠ‚ç‚¹å’Œ\n        cnt += p.val;\n    }\n    return cnt;\n}\n```"
}