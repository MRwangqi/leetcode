{
	"titleSlug": "binary-string-with-substrings-representing-1-to-n",
	"slug": "suo-xiao-fan-wei-by-kai-xin-bao-bei-k-x0z3",
	"url": "https://leetcode-cn.com/problems/binary-string-with-substrings-representing-1-to-n/solution/suo-xiao-fan-wei-by-kai-xin-bao-bei-k-x0z3/",
	"content": "本题`n`的范围是 1~10⁹，看似特别大，其实受`s`长度的制约，当`n>=2048`时我们可以直接返回`false`。解释如下：若`n>=2048`，则需要表示 1024~2047 范围内的 1024 个整数。但这些整数都是 11 位的，长度为 1000 的零一字符串最多只能表示 990 个 11 位二进制数，因此这是办不到的。\r\n\r\n剩下的代码是常规思路。\r\n\r\n```C++ []\r\nclass Solution {\r\npublic:\r\n    bool queryString(string s, int n) {\r\n        if(n>=2048) return false;\r\n        vector<int> hash(n+1);\r\n        int len=0, i, cur, j;\r\n        i=n;                                //求n的位数\r\n        while(i!=0) len++, i>>=1;\r\n        for(i=0;i<=s.size();i++){\r\n            if(s[i]=='0') continue;\r\n            cur=0;\r\n            for(j=i;j<i+len&&j<s.size();j++){\r\n                cur<<=1;\r\n                cur+=(s[j]=='1');\r\n            }\r\n            while(cur!=0){\r\n                if(cur<=n) hash[cur]=1;\r\n                cur>>=1;\r\n            }\r\n        }\r\n        for(i=1;i<=n;i++)\r\n            if(hash[i]==0) return false;\r\n        return true;\r\n    }\r\n};\r\n```\r\n\r\n时间：0 ms (100.00%)\r\n空间：6.2 MB (53.03%)\r\n\r\n补充：本题中，`s`的长度只有 1000=10³，若`s`的长度变为 10⁴，甚至 10⁶ 呢？其实影响也不大。当`s.size()==10⁶`时，长度为 21 的二进制数有1048576个，但`s`最多只能表示其中999980个。所以只要`n>=1048576`，直接返回`false`即可。"
}