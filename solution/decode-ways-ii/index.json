{
	"titleSlug": "decode-ways-ii",
	"slug": "by-oahrats-gfbj",
	"url": "https://leetcode-cn.com/problems/decode-ways-ii/solution/by-oahrats-gfbj/",
	"content": "![image.png](https://pic.leetcode-cn.com/1665360816-RnKdwL-image.png)\r\n\r\n```\r\nclass Solution {\r\n    private static int MOD = 1_000_000_007;\r\n\r\n    public static int numDecodings(String s) {\r\n        char[] arr=s.toCharArray();\r\n        if (arr[0]=='0') return 0;\r\n        int N=arr.length;\r\n        long[] dp=new long[N+1];\r\n        dp[0]=1; dp[1] = arr[0]=='*' ? 9:1;  \r\n        char pre=arr[0];\r\n        for (int i=2; i<=N; i++) {\r\n            char ch=arr[i-1];\r\n            if (ch=='0') {\r\n                if(pre=='1' || pre=='2') dp[i] = dp[i-2];  \r\n                else if(pre=='*') dp[i]=2*dp[i-2];\r\n                else return 0;\r\n            }\r\n            else if (ch>='1' & ch<='6') {\r\n                dp[i] = dp[i-1];            \r\n                if (pre=='1' || pre=='2') dp[i]+=dp[i-2];\r\n                else if (pre=='*') dp[i]+=2*dp[i-2];\r\n            }\r\n            else if(ch>='7' & ch<='9') {\r\n                dp[i] = dp[i-1];                \r\n                if (pre=='1' || pre=='*') dp[i]+=dp[i-2];\r\n            }\r\n            else if (ch=='*') {\r\n                dp[i] = 9*dp[i-1];\r\n                if (pre=='1') dp[i]+=9*dp[i-2];\r\n                else if (pre=='2') dp[i]+=6*dp[i-2];\r\n                else if (pre=='*') dp[i]+=15*dp[i-2];\r\n            }   \r\n            dp[i]%=MOD;\r\n            pre = ch;\r\n        }\r\n        return (int)dp[N];\r\n    }\r\n}\r\n```\r\n"
}