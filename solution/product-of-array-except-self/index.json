{
	"titleSlug": "product-of-array-except-self",
	"slug": "chu-zi-shen-yi-wai-shu-zu-de-cheng-ji-by-leetcode-",
	"url": "https://leetcode-cn.com/problems/product-of-array-except-self/solution/chu-zi-shen-yi-wai-shu-zu-de-cheng-ji-by-leetcode-/",
	"content": "### ğŸ“ºè§†é¢‘é¢˜è§£  \n\n![238.é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯.mp4](5f8f385b-1288-4c91-8a65-e7490a96764c)\n\n### ğŸ“–æ–‡å­—é¢˜è§£\n\n#### å‰è¨€\n\nè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨çº¿æ€§æ—¶é—´å’Œç©ºé—´å†…è§£å†³ã€‚å…ˆè®¡ç®—ç»™å®šæ•°ç»„æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œç„¶åå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´  $x$ï¼Œå°†æ€»çš„ä¹˜ç§¯é™¤ä»¥ $x$ æ¥æ±‚å¾—é™¤è‡ªèº«å€¼çš„ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ã€‚\n\nç„¶è€Œè¿™æ ·çš„è§£å†³æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœè¾“å…¥æ•°ç»„ä¸­å‡ºç° 0ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±å¤±æ•ˆäº†ã€‚è€Œä¸”åœ¨é—®é¢˜ä¸­è¯´æ˜äº†ä¸å…è®¸ä½¿ç”¨é™¤æ³•è¿ç®—ã€‚è¿™å¢åŠ äº†è¿™ä¸ªé—®é¢˜çš„éš¾åº¦ã€‚\n\n#### æ–¹æ³•ä¸€ï¼šå·¦å³ä¹˜ç§¯åˆ—è¡¨\n\n**æ€è·¯**\n\næˆ‘ä»¬ä¸å¿…å°†æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯é™¤ä»¥ç»™å®šç´¢å¼•å¤„çš„æ•°å­—å¾—åˆ°ç›¸åº”çš„ç­”æ¡ˆï¼Œè€Œæ˜¯åˆ©ç”¨ç´¢å¼•å·¦ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯å’Œå³ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ï¼ˆå³å‰ç¼€ä¸åç¼€ï¼‰ç›¸ä¹˜å¾—åˆ°ç­”æ¡ˆã€‚\n\nå¯¹äºç»™å®šç´¢å¼• $i$ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒå·¦è¾¹æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ä¹˜ä»¥å³è¾¹æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ã€‚ä¸‹é¢è®©æˆ‘ä»¬æ›´åŠ å…·ä½“çš„æè¿°è¿™ä¸ªç®—æ³•ã€‚\n\n**ç®—æ³•**\n\n1. åˆå§‹åŒ–ä¸¤ä¸ªç©ºæ•°ç»„ `L` å’Œ `R`ã€‚å¯¹äºç»™å®šç´¢å¼• `i`ï¼Œ`L[i]` ä»£è¡¨çš„æ˜¯ `i` å·¦ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ï¼Œ`R[i]` ä»£è¡¨çš„æ˜¯ `i` å³ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ã€‚\n2. æˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªå¾ªç¯æ¥å¡«å…… `L` å’Œ `R` æ•°ç»„çš„å€¼ã€‚å¯¹äºæ•°ç»„ `L`ï¼Œ`L[0]` åº”è¯¥æ˜¯ `1`ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ çš„å·¦è¾¹æ²¡æœ‰å…ƒç´ ã€‚å¯¹äºå…¶ä»–å…ƒç´ ï¼š`L[i] = L[i-1] * nums[i-1]`ã€‚\n3. åŒç†ï¼Œå¯¹äºæ•°ç»„ `R`ï¼Œ`R[length-1]` åº”ä¸º `1`ã€‚`length` æŒ‡çš„æ˜¯è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚å…¶ä»–å…ƒç´ ï¼š`R[i] = R[i+1] * nums[i+1]`ã€‚\n4. å½“ `R` å’Œ `L` æ•°ç»„å¡«å……å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¾“å…¥æ•°ç»„ä¸Šè¿­ä»£ï¼Œä¸”ç´¢å¼• `i` å¤„çš„å€¼ä¸ºï¼š`L[i] * R[i]`ã€‚\n\nè®©æˆ‘ä»¬ç”¨ä»¥ä¸‹å›¾ç‰‡çœ‹çœ‹ç®—æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š\n\n<![fig1](https://assets.leetcode-cn.com/solution-static/238/1.PNG),![fig2](https://assets.leetcode-cn.com/solution-static/238/2.PNG),![fig3](https://assets.leetcode-cn.com/solution-static/238/3.PNG),![fig4](https://assets.leetcode-cn.com/solution-static/238/4.PNG),![fig5](https://assets.leetcode-cn.com/solution-static/238/5.PNG),![fig6](https://assets.leetcode-cn.com/solution-static/238/6.PNG),![fig7](https://assets.leetcode-cn.com/solution-static/238/7.PNG),![fig8](https://assets.leetcode-cn.com/solution-static/238/8.PNG),![fig9](https://assets.leetcode-cn.com/solution-static/238/9.PNG),![fig10](https://assets.leetcode-cn.com/solution-static/238/10.PNG)>\n\n```C++ [sol1-C++]\nclass Solution {\npublic:\n    vector<int> productExceptSelf(vector<int>& nums) {\n        int length = nums.size();\n\n        // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨\n        vector<int> L(length, 0), R(length, 0);\n\n        vector<int> answer(length);\n\n        // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1\n        L[0] = 1;\n        for (int i = 1; i < length; i++) {\n            L[i] = nums[i - 1] * L[i - 1];\n        }\n\n        // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1\n        R[length - 1] = 1;\n        for (int i = length - 2; i >= 0; i--) {\n            R[i] = nums[i + 1] * R[i + 1];\n        }\n\n        // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        for (int i = 0; i < length; i++) {\n            answer[i] = L[i] * R[i];\n        }\n\n        return answer;\n    }\n};\n```\n\n```python [sol1-Python3]\nclass Solution:\n    def productExceptSelf(self, nums: List[int]) -> List[int]:\n        length = len(nums)\n        \n        # L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨\n        L, R, answer = [0]*length, [0]*length, [0]*length\n        \n        # L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        # å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1\n        L[0] = 1\n        for i in range(1, length):\n            L[i] = nums[i - 1] * L[i - 1]\n        \n        # R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        # å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1\n        R[length - 1] = 1\n        for i in reversed(range(length - 1)):\n            R[i] = nums[i + 1] * R[i + 1]\n\n        # å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        for i in range(length):\n            answer[i] = L[i] * R[i]\n        \n        return answer\n```\n\n```java [sol1-Java]\nclass Solution {\n    public int[] productExceptSelf(int[] nums) {\n        int length = nums.length;\n\n        // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨\n        int[] L = new int[length];\n        int[] R = new int[length];\n\n        int[] answer = new int[length];\n\n        // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1\n        L[0] = 1;\n        for (int i = 1; i < length; i++) {\n            L[i] = nums[i - 1] * L[i - 1];\n        }\n\n        // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1\n        R[length - 1] = 1;\n        for (int i = length - 2; i >= 0; i--) {\n            R[i] = nums[i + 1] * R[i + 1];\n        }\n\n        // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        for (int i = 0; i < length; i++) {\n            answer[i] = L[i] * R[i];\n        }\n\n        return answer;\n    }\n}\n```\n\n```golang [sol1-Golang]\nfunc productExceptSelf(nums []int) []int {\n    length := len(nums)\n\n    // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨\n    L, R, answer := make([]int, length), make([]int, length), make([]int, length)\n\n    // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1\n    L[0] = 1\n    for i := 1; i < length; i++ {\n        L[i] = nums[i-1] * L[i-1]\n    }\n\n    // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1\n    R[length-1] = 1\n    for i := length - 2; i >= 0; i-- {\n        R[i] = nums[i+1] * R[i+1]\n    }\n    \n    // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    for i := 0; i < length; i++ {\n        answer[i] = L[i] * R[i]\n    }\n    return answer\n}\n```\n\n```TypeScript [sol1-TypeScript]\nvar productExceptSelf = function(nums: number[]): number[] {\n    const length = nums.length;\n\n    // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨\n    const L = new Array<number>(length);\n    const R = new Array<number>(length);\n\n    const answer = new Array<number>(length);\n\n    // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1\n    L[0] = 1;\n    for (let i = 1; i < length; i++) {\n        L[i] = nums[i - 1] * L[i - 1];\n    }\n\n    // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1\n    R[length - 1] = 1;\n    for (let i = length - 2; i >= 0; i--) {\n        R[i] = nums[i + 1] * R[i + 1];\n    }\n\n    // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    for (let i = 0; i < length; i++) {\n        answer[i] = L[i] * R[i];\n    }\n\n    return answer;\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æŒ‡çš„æ˜¯æ•°ç»„ `nums` çš„å¤§å°ã€‚é¢„å¤„ç† `L` å’Œ `R` æ•°ç»„ä»¥åŠæœ€åçš„éå†è®¡ç®—éƒ½æ˜¯ $O(N)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æŒ‡çš„æ˜¯æ•°ç»„ `nums` çš„å¤§å°ã€‚ä½¿ç”¨äº† `L` å’Œ `R` æ•°ç»„å»æ„é€ ç­”æ¡ˆï¼Œ`L` å’Œ `R` æ•°ç»„çš„é•¿åº¦ä¸ºæ•°ç»„ `nums` çš„å¤§å°ã€‚\n\n#### æ–¹æ³•äºŒï¼šç©ºé—´å¤æ‚åº¦ $O(1)$ çš„æ–¹æ³•\n\n**æ€è·¯**\n\nå°½ç®¡ä¸Šé¢çš„æ–¹æ³•å·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦å¹¶ä¸ä¸ºå¸¸æ•°ã€‚\n\nç”±äºè¾“å‡ºæ•°ç»„ä¸ç®—åœ¨ç©ºé—´å¤æ‚åº¦å†…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°† `L` æˆ– `R` æ•°ç»„ç”¨è¾“å‡ºæ•°ç»„æ¥è®¡ç®—ã€‚å…ˆæŠŠè¾“å‡ºæ•°ç»„å½“ä½œ `L` æ•°ç»„æ¥è®¡ç®—ï¼Œç„¶åå†åŠ¨æ€æ„é€  `R` æ•°ç»„å¾—åˆ°ç»“æœã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹åŸºäºè¿™ä¸ªæ€æƒ³çš„ç®—æ³•ã€‚\n\n**ç®—æ³•**\n\n1. åˆå§‹åŒ– `answer` æ•°ç»„ï¼Œå¯¹äºç»™å®šç´¢å¼• `i`ï¼Œ`answer[i]` ä»£è¡¨çš„æ˜¯ `i` å·¦ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ã€‚\n2. æ„é€ æ–¹å¼ä¸ä¹‹å‰ç›¸åŒï¼Œåªæ˜¯æˆ‘ä»¬è¯•å›¾èŠ‚çœç©ºé—´ï¼Œå…ˆæŠŠ `answer` ä½œä¸ºæ–¹æ³•ä¸€çš„ `L` æ•°ç»„ã€‚\n3. è¿™ç§æ–¹æ³•çš„å”¯ä¸€å˜åŒ–å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æ„é€  `R` æ•°ç»„ã€‚è€Œæ˜¯ç”¨ä¸€ä¸ªéå†æ¥è·Ÿè¸ªå³è¾¹å…ƒç´ çš„ä¹˜ç§¯ã€‚å¹¶æ›´æ–°æ•°ç»„ $answer[i]=answer[i]*R$ã€‚ç„¶å $R$ æ›´æ–°ä¸º $R=R*nums[i]$ï¼Œå…¶ä¸­å˜é‡ $R$ è¡¨ç¤ºçš„å°±æ˜¯ç´¢å¼•å³ä¾§æ•°å­—çš„ä¹˜ç§¯ã€‚\n\n```cpp [sol2-C++]\nclass Solution {\npublic:\n    vector<int> productExceptSelf(vector<int>& nums) {\n        int length = nums.size();\n        vector<int> answer(length);\n\n        // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1\n        answer[0] = 1;\n        for (int i = 1; i < length; i++) {\n            answer[i] = nums[i - 1] * answer[i - 1];\n        }\n\n        // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1\n        int R = 1;\n        for (int i = length - 1; i >= 0; i--) {\n            // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R\n            answer[i] = answer[i] * R;\n            // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š\n            R *= nums[i];\n        }\n        return answer;\n    }\n};\n```\n\n```python [sol2-Python3]\nclass Solution:\n    def productExceptSelf(self, nums: List[int]) -> List[int]:\n        length = len(nums)\n        answer = [0]*length\n        \n        # answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        # å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1\n        answer[0] = 1\n        for i in range(1, length):\n            answer[i] = nums[i - 1] * answer[i - 1]\n        \n        # R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        # åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1\n        R = 1;\n        for i in reversed(range(length)):\n            # å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R\n            answer[i] = answer[i] * R\n            # R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š\n            R *= nums[i]\n        \n        return answer\n```\n\n```java [sol2-Java]\nclass Solution {\n    public int[] productExceptSelf(int[] nums) {\n        int length = nums.length;\n        int[] answer = new int[length];\n\n        // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1\n        answer[0] = 1;\n        for (int i = 1; i < length; i++) {\n            answer[i] = nums[i - 1] * answer[i - 1];\n        }\n\n        // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n        // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1\n        int R = 1;\n        for (int i = length - 1; i >= 0; i--) {\n            // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R\n            answer[i] = answer[i] * R;\n            // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š\n            R *= nums[i];\n        }\n        return answer;\n    }\n}\n```\n\n```golang [sol2-Golang]\nfunc productExceptSelf(nums []int) []int {\n    length := len(nums)\n    answer := make([]int, length)\n\n    // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1\n    answer[0] = 1\n    for i := 1; i < length; i++ {\n        answer[i] = nums[i-1] * answer[i-1]\n    }\n\n    // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1\n    R := 1\n    for i := length - 1; i >= 0; i-- {\n        // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R\n        answer[i] = answer[i] * R\n        // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š\n        R *= nums[i]\n    }\n    return answer\n}\n```\n\n```TypeScript [sol2-TypeScript]\nvar productExceptSelf = function(nums: number[]): number[] {\n    const length = nums.length;\n    const answer = new Array<number>(length);\n\n    // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1\n    answer[0] = 1;\n    for (let i = 1; i < length; i++) {\n        answer[i] = nums[i - 1] * answer[i - 1];\n    }\n\n    // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯\n    // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1\n    let R = 1;\n    for (let i = length - 1; i >= 0; i--) {\n        // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R\n        answer[i] = answer[i] * R;\n        // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š\n        R *= nums[i];\n    }\n    return answer;\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æŒ‡çš„æ˜¯æ•°ç»„ `nums` çš„å¤§å°ã€‚åˆ†æä¸æ–¹æ³•ä¸€ç›¸åŒã€‚\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œè¾“å‡ºæ•°ç»„ä¸ç®—è¿›ç©ºé—´å¤æ‚åº¦ä¸­ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾å˜é‡ã€‚"
}