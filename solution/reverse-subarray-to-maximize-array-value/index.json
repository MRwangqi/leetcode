{
	"titleSlug": "reverse-subarray-to-maximize-array-value",
	"slug": "chun-cui-by-bai-mu-ying-li-dra-eniac-rd49",
	"url": "https://leetcode-cn.com/problems/reverse-subarray-to-maximize-array-value/solution/chun-cui-by-bai-mu-ying-li-dra-eniac-rd49/",
	"content": "ç¿»è½¬å­æ•°ç»„å¾—åˆ°çš„æœ€å¤§çš„æ•°ç»„å€¼\r\n\r\næœ¬é¢˜çš„é¢˜æ„æ˜¯ä¸éš¾ç†è§£çš„ï¼Œé¦–å…ˆç»™å‡ºäº†æ•°ç»„å€¼çš„æ¦‚å¿µï¼Œå°±æ˜¯æ•°ç»„ä¸­ç›¸é‚»ä¸¤é¡¹çš„å·®å€¼çš„ç»å¯¹å€¼çš„å’Œï¼Œç°åœ¨ç»™ä¸€æ¬¡å¯ä»¥ç¿»è½¬å­æ•°ç»„çš„æœºä¼šï¼Œè¦æ±‚å¾—åœ¨è¿™æ ·çš„æƒ…å†µä¸‹èƒ½å¾—åˆ°çš„æœ€å¤§æ•°ç»„å€¼ï¼Œé‚£ä¹ˆè¿™æ ·çš„é¢˜ç›®å…¶å®æ˜¯å¾ˆå®¹æ˜“è®©æˆ‘ä»¬å¾€è´ªå¿ƒçš„æ€è·¯ä¸Šå»æ€è€ƒçš„ï¼Œå› ä¸ºæš´åŠ›äºŒé‡å¾ªç¯æšä¸¾è‚¯å®šè¶…æ—¶ï¼Œé‚£æˆ‘ä»¬å°±è€ƒè™‘èƒ½ä¸èƒ½åˆ©ç”¨è´ªå¿ƒçš„ç®—æ³•æ€è·¯æˆ–è€…æ•°å­¦æ¨ç†ç»“è®ºå»ä¼˜åŒ–å¤æ‚åº¦ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢˜ç›®ç¡®å®æ˜¯è¿™æ ·ä¼˜åŒ–çš„ï¼Œé‚£ä¹ˆåºŸè¯å°‘è¯´ï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥ä¼˜ç¾ä¸”çº¯ç²¹çš„æ•°å­¦æ¼”ç»ç¯èŠ‚ã€‚\r\n\r\né¦–å…ˆæˆ‘ä»¬å…ˆè€ƒè™‘ç¿»è½¬çš„å­æ•°ç»„åœ¨ä¸­é—´çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯ç¿»è½¬çš„å­æ•°ç»„ä¸¤è¾¹éƒ½æœ‰æ•°å€¼ï¼Œè¿™æ˜¯ä¸€èˆ¬çš„æƒ…å†µï¼Œç»“è®ºæ›´åŠ æ™®éä¸”ç›´æ¥ã€‚\r\n\r\næˆ‘ä»¬ä¸å¦¨è®° $n$ ä¸ºåŸæ•°ç»„çš„é•¿åº¦ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ ä¾æ¬¡è®°ä¸º:\r\n$$a_0,a_1,a_2,a_3,\\cdots\\cdots,a_i-_1,a_i,\\cdots\\cdots,a_j,a_j+_1,\\cdots\\cdots,a_n-_1\\\\$$\r\nå…¶ä¸­ï¼Œ $a_i$ ä¸ $a_j$ è¡¨ç¤ºæˆ‘ä»¬å°†é€‰æ‹©ä» $a_i$ åˆ° $a_j$ è¿™æ®µå­æ•°ç»„è¿›è¡Œæˆ‘ä»¬çš„ç¿»è½¬æ“ä½œ,å¾ˆå®¹æ˜“å°±èƒ½å¤Ÿçœ‹å‡ºæ¥ï¼Œå¦‚æœæˆ‘ä»¬è®°ç¿»è½¬å­æ•°ç»„å‰çš„æ•°ç»„å€¼ä¸º $curVal$ ,ç”¨ $Aã€Bã€Cã€D$ åˆ†åˆ«è¡¨ç¤º $a_i-_1ã€a_iã€a_jã€a_j+_1$ æ‰€å¯¹åº”çš„æ•°ç»„å€¼ï¼Œè®°ç¿»è½¬å­æ•°ç»„åçš„æ•°ç»„å€¼ä¸º $nextVal$ ,é‚£ä¹ˆæ ¹æ®å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°:\r\n$$nextVal=curVal+|D-B|+|C-A|-|D-C|-|B-A| \\tag{1}$$\r\n$(1)$ å¼å…¶å®æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ï¼Œç¿»è½¬å­æ•°ç»„ä¹‹åå­æ•°ç»„ä¸­é—´çš„å€¼å¹¶ä¸ä¼šå¯¹æœ€ç»ˆçš„ç»“æœäº§ç”Ÿå½±å“ï¼Œåªæœ‰è¾¹ç•Œä¸Šçš„å››ä¸ªæ•°ä¼šäº§ç”Ÿå½±å“ï¼Œé‚£ä¹ˆæœ¬é¢˜å…¶å®å°±æ˜¯æ±‚å¾— $(1)$ çš„æœ€å¤§å€¼ï¼Œæˆ‘ä»¬è®° $target$ è¡¨ç¤º $|D-B|+|C-A|-|D-C|-|B-A|$ çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ° $target$ çš„æœ€å¤§å€¼ã€‚\r\næ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ $target$è¿›è¡Œå˜æ¢ç ”ç©¶ã€‚æ˜¾è€Œæ˜“è§å¾—ï¼Œç€æ‰‹çš„å…³é”®å°±æ˜¯å»ç»å¯¹å€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬åˆ†ç±»è®¨è®º:\r\n$1^ã€‚ï¼šD-B>0 å¹¶ä¸” C-A<0,targetå¯ä»¥è¡¨ç¤ºä¸º$\r\n$$D-B-C+A-|D-C|-|B-A|\\\\$$\r\n$æ•´ç†å¯å¾—ï¼Œ$\r\n$$(D-C)-(B-A)-|D-C|-|B-A|\\tag{2}$$\r\n$è§‚å¯Ÿ(2)å¼ï¼Œå¦‚æœD-C>0,B-A>0,é‚£ä¹ˆè¿™ä¸ªå¼å­çš„å€¼ä¸º-(B-A)-|B-A|,è€ŒB-A>0,æ‰€ä»¥å¯¼è‡´äº†è¿™ä¸ªå¼å­çš„ç»“æœä¸€å®šæ˜¯æ¯”0å°çš„ï¼Œè¿™è‚¯å®šä¸ä¼šä½œä¸ºç­”æ¡ˆçš„ç»„æˆï¼Œå› æ­¤ç›´æ¥æ’é™¤è¿™ç§æƒ…å†µ;$\r\n$åŒæ ·åœ°ï¼Œå¦‚æœD-C>0,B-A<0,é‚£ä¹ˆè¿™ä¸ªå¼å­çš„å€¼ä¸º0ï¼ŒåŒæ ·ä¸ä¼šå¯¹æœ€ä¼˜çš„ç­”æ¡ˆäº§ç”Ÿå½±å“ï¼›$\r\n$è‡ªç„¶å¯ä»¥å¾ˆè½»æ¾åœ°å¾—åˆ°å½“D-C<0,B-A>0ä»¥åŠD-C<0,B-A<0çš„æƒ…å†µï¼Œéƒ½ä¼šä½¿targetçš„å€¼<=0ï¼Œè¿™äº›æƒ…å†µéƒ½å¯ä»¥ç›´æ¥æ’é™¤ã€‚$\r\n\r\n$2^ã€‚ï¼šD-B<0 å¹¶ä¸” C-A>0,targetå¯ä»¥è¡¨ç¤ºä¸º$\r\n$$B-D+C-A-|D-C|-|B-A|\\\\$$\r\n$æ•´ç†å¯å¾—ï¼Œ$\r\n$$(B-A)-(D-C)-|D-C|-|B-A|\\tag{3}$$\r\n$å…¶å®å’Œç¬¬ä¸€ç§æƒ…å†µä¸€æ ·çš„ï¼Œæˆ‘ä»¬ç®€å•å¾—è®¨è®ºä¸€ä¸‹ï¼Œå¾ˆå¿«å¯ä»¥å‘ç°è¿™ç§æƒ…å†µä¸‹çš„targetå€¼ä¹Ÿæ˜¯å§‹ç»ˆ<=0çš„ï¼Œå¯ä»¥ç›´æ¥æ’é™¤ï¼Œä¸å¯èƒ½ä½œä¸ºæœ€ç»ˆçš„ç­”æ¡ˆçš„ç»„æˆã€‚$\r\n\r\n$3^ã€‚ï¼šD-B>0 å¹¶ä¸” C-A>0,targetå¯ä»¥è¡¨ç¤ºä¸º$\r\n$$D-B+C-A-|D-C|-|B-A|\\\\$$\r\n$æ•´ç†å¯å¾—ï¼Œ$\r\n$$(D+C)-(B+A)-|D-C|-|B-A|\\tag{4}$$\r\n$åŒæ ·åœ°ï¼Œå’Œå‰é¢çš„è®¨è®ºæ€è·¯ä¸€æ ·ï¼Œæˆ‘ä»¬è®¨è®ºå»æ‰ç»å¯¹å€¼çš„æƒ…å†µ:$\r\n$è‹¥D-C>0,B-A>0,é‚£ä¹ˆ(4)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2C-2B\\tag{5}$$\r\n$è‹¥D-C>0,B-A<0,é‚£ä¹ˆ(4)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2C-2A\\tag{6}$$\r\n$è‹¥D-C<0,B-A>0,é‚£ä¹ˆ(4)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2D-2B\\tag{7}$$\r\n$è‹¥D-C<0,B-A<0,é‚£ä¹ˆ(4)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2D-2A\\tag{8}$$\r\n\r\n$4^ã€‚ï¼šD-B<0 å¹¶ä¸” C-A<0,targetå¯ä»¥è¡¨ç¤ºä¸º$\r\n$$B-D+A-C-|D-C|-|B-A|\\\\$$\r\n$æ•´ç†å¯å¾—ï¼Œ$\r\n$$(B+A)-(D+C)-|D-C|-|B-A|\\tag{9}$$\r\n$åŒæ ·åœ°ï¼Œæˆ‘ä»¬è®¨è®ºå»æ‰ç»å¯¹å€¼çš„æƒ…å†µ:$\r\n$è‹¥D-C>0,B-A>0,é‚£ä¹ˆ(9)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2A-2D\\tag{10}$$\r\n$è‹¥D-C>0,B-A<0,é‚£ä¹ˆ(9)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2B-2D\\tag{11}$$\r\n$è‹¥D-C<0,B-A>0,é‚£ä¹ˆ(9)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2A-2C\\tag{12}$$\r\n$è‹¥D-C<0,B-A<0,é‚£ä¹ˆ(9)å¼å¯æ•´ç†ä¸ºï¼Œ$\r\n$$2B-2C\\tag{13}$$\r\n\r\nè‡³æ­¤ï¼Œæ‰€æœ‰æƒ…å†µæˆ‘ä»¬éƒ½å·²ç»è®¨è®ºå®Œæ¯•ï¼Œè§‚å¯Ÿä¸Šé¢ $(5)(6)(7)(8)$ å’Œ $(10)(11)(12)(13)$ å¼ä»¥åŠ $ABCD$ åœ¨æ•°ç»„ä¸­æ‰€å¯¹åº”çš„å€¼æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ$target$ å‡å¯ä»¥è¡¨ç¤ºä¸º:\r\n**åœ¨æ•°ç»„ä¸­ç›¸é‚»ä¸¤é¡¹çš„è¾ƒå°è€…-ç›¸é‚»ä¸¤é¡¹çš„è¾ƒå¤§è€…çš„2å€ã€‚**\r\n\r\né‚£ä¹ˆåˆ°æ­¤æˆ‘ä»¬çš„ä¼˜ç¾çš„æ•°å­¦é€»è¾‘æ¨ç†å¯ä»¥è¯´ç®—æ˜¯ç»“æŸäº†ï¼Œæˆ‘ä»¬è¦æ±‚çš„æœ€å¤§çš„æ•°ç»„å€¼ï¼Œå…¶å®å°±æ˜¯ä¸€æ¬¡éå†æ•°ç»„ï¼Œç„¶åå¾—åˆ°æœ€å¤§åŒ–çš„ç›¸é‚»ä¸¤é¡¹çš„è¾ƒå°è€…ä¸ç›¸é‚»ä¸¤é¡¹çš„è¾ƒå¤§è€…ï¼Œæœ€åä¹˜ä»¥2åŠ åˆ° $curVal$ä¸Šå³å¯ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªï¼Œä¸Šè¿°è®¨è®ºæ˜¯åŸºäºå­æ•°ç»„åœ¨ä¸­é—´çš„æƒ…å†µï¼Œé‚£ä¹ˆå¦‚æœç¿»è½¬çš„å­æ•°ç»„æœ‰ä¸€ç«¯è½åœ¨å·¦å³è¾¹ç•Œä¸Šçš„æƒ…å†µæ€ä¹ˆåŠå‘¢?å¾ˆç®€å•ï¼Œç‰¹æ®Šå¤„ç†å°±å¯ä»¥äº†ï¼Œä¸¤æ¬¡ä¸€ç»´éå†å³å¯ã€‚æœ€ç»ˆæˆ‘ä»¬é€šè¿‡ä¸¥å¯†çš„æ•°å­¦é€»è¾‘æ¨ç†ï¼Œæ¸…æ™°åœ°è¯æ˜äº†æˆ‘ä»¬ä½¿ç”¨çš„è´ªå¿ƒé€»è¾‘ï¼Œä»£ç è‡ªç„¶æ˜¯æ°´åˆ°æ¸ æˆã€æ¸…æ™°æ˜äº†ã€‚\r\n\r\nä»£ç å¦‚ä¸‹ï¼šï¼ˆç å­—æ’ç‰ˆå…¬å¼ä¸æ˜“ï¼Œå¸Œæœ›ä½ èƒ½å½»åº•ç†è§£ï¼ğŸ˜‹ï¼‰\r\n```\r\nclass Solution {\r\npublic:\r\n    int maxValueAfterReverse(vector<int>& nums) {\r\n        int n=nums.size();\r\n        if(n==1)return 0;\r\n        int curVal=0;\r\n        for(int i=0;i<n-1;i++){\r\n            curVal+=abs(nums[i]-nums[i+1]);\r\n        }\r\n        int res=curVal;\r\n        //è¾¹ç•Œ1:i=0\r\n        for(int j=1;j<n-1;j++){\r\n            res=max(res,curVal+abs(nums[j+1]-nums[0])-abs(nums[j+1]-nums[j]));\r\n        }\r\n        //è¾¹ç•Œ2:j=n-1\r\n        for(int i=1;i<n-1;i++){\r\n            res=max(res,curVal+abs(nums[i-1]-nums[n-1])-abs(nums[i]-nums[i-1]));\r\n        }\r\n        int a=min(nums[0],nums[1]);\r\n        int b=max(nums[0],nums[1]);\r\n        for(int i=0;i<n-1;i++){\r\n            a=max(a,min(nums[i],nums[i+1]));\r\n            b=min(b,max(nums[i],nums[i+1]));\r\n        }\r\n        res=max(res,curVal+2*(a-b));\r\n        return res;\r\n    }\r\n};\r\n```\r\n"
}