{
	"titleSlug": "convert-to-base-2",
	"slug": "daydayuppp-jian-dan-de-zhi-guan-mo-ni-by-g2y2",
	"url": "https://leetcode-cn.com/problems/convert-to-base-2/solution/daydayuppp-jian-dan-de-zhi-guan-mo-ni-by-g2y2/",
	"content": "> Problem: [1017. è´ŸäºŒè¿›åˆ¶è½¬æ¢](https://leetcode.cn/problems/convert-to-base-2/description/)\n\n[TOC]\n\n# æ€è·¯\n\nå¯¹äºã€Œè´ŸäºŒè¿›åˆ¶æ•°ã€å¾ˆç›´è§‚çš„ä¸€ä¸ªå‘ç°å°±æ˜¯ï¼š\n\n- $2 \\times (-2)^i = (-2) ^ {i + 1} + (-2)^{i + 2}$ã€‚\n- $2^i = (-2)^{i} + (-2)^{i + 1}$ï¼Œå½“ $i$ ä¸ºå¥‡æ•°æ—¶ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬ç”¨ $h[i]$ è¡¨ç¤º $n$ éœ€è¦çš„ $(-2) ^ i$ çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆå¯¹ $n$ åŸäºŒè¿›åˆ¶æ•°è¿›è¡Œåˆ†æï¼Œå¦‚æœç¬¬ $i$ ä½ä¸º $1$ï¼š\n\n- å¦‚æœ $i$ ä¸ºå¶æ•°ï¼š$h[i]=h[i] + 1$ã€‚\n- å¦‚æœ $i$ ä¸ºå¥‡æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ $h[i] + h[i + 1] = (-2)^i + (-2)^{i+1} = -(-2)^i = 2^i$ æ¥è¡¨ç¤ºï¼š $h[i] = h[i] + 1 , h[i + 1] = h[i + 1] + 1$ã€‚\n\n```cpp\nfor (int i = 0; i < 31; ++i) {\n    if (n >> i & 1) {\n        ++ h[i];\n        if (i & 1) ++ h[i + 1];\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬ä» $0$ å¾€åå»å°†æ¯ä¸€ä¸ª $h[i]$ ç»™å‡å°åˆ° $<2$ å³å¯ï¼Œå¦‚æœ $h[i] \\ge 2$ï¼š\n\n- $h[i + 1] > 0$ é‚£ä¹ˆå‰è€… $2$ ä»½å¯ä»¥å’Œåè€… $1$ ä»½ç›¸äº’æŠµæ¶ˆã€‚\n- å¦åˆ™æ¯ä¸¤ä»½ $h[i]$ å¯ä»¥ç”± $h[i + 1]$ å’Œ $h[i + 2]$ æ„æˆã€‚\n\n```cpp\nfor (int i = 0; i < 40; ++i) {\n    if (h[i] > 1 && h[i + 1]) {\n        int sub = min(h[i] / 2, h[i + 1]);\n        h[i] -= sub * 2;\n        h[i + 1] -= sub;\n    }\n    if (h[i] / 2) h[i + 1] += h[i] / 2, h[i + 2] += h[i] / 2;\n    h[i] &= 1;\n}\n```\n\næœ€åå°† $h[]$ ç”¨å­—ç¬¦ä¸²çš„å½¢å¼è¡¨ç¤ºå‡ºæ¥å³å¯ï¼Œæ³¨æ„éœ€è¦å»æ‰å‰å¯¼é›¶ã€‚\n\nå…·ä½“çœ‹ä»£ç å®ç°å³å¯ï¼Œæœ‰ä»»ä½•ç–‘é—®æ¬¢è¿è¯„è®ºåŒºæŒ‡å‡º ğŸ¬\n\n# å¤æ‚åº¦\n- æ—¶é—´å¤æ‚åº¦: $O(C)$ å’Œä½æ•°æ€»æ•°æœ‰å…³ã€‚\n\n- ç©ºé—´å¤æ‚åº¦: $O(C)$ å’Œä½æ•°æ€»æ•°æœ‰å…³ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ¯ä¸€ä½éœ€è¦çš„ä¸ªæ•°ã€‚\n\n# Code\n```C++\nclass Solution {\npublic:\n    string baseNeg2(int n) {\n        if (!n) return \"0\";\n        vector<int> h(40, 0);\n        for (int i = 0; i < 31; ++i) {\n            if (n >> i & 1) {\n                ++ h[i];\n                if (i & 1) ++ h[i + 1];\n            }\n        }\n        for (int i = 0; i < 40; ++i) {\n            if (h[i] > 1 && h[i + 1]) {\n                int sub = min(h[i] / 2, h[i + 1]);\n                h[i] -= sub * 2;\n                h[i + 1] -= sub;\n            }\n            if (h[i] / 2) h[i + 1] += h[i] / 2, h[i + 2] += h[i] / 2;\n            h[i] &= 1;\n        }\n        int l = 39;\n        while (!h[l]) -- l; // å»æ‰å‰å¯¼é›¶\n        string res = \"\";\n        while (l >= 0) {\n            if (h[l]) res += '1';\n            else res += '0';\n            -- l;\n        }\n        return res;\n    }\n};\n```\n"
}