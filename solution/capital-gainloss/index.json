{
	"titleSlug": "capital-gainloss",
	"slug": "by-clever-austinzya-9n8o",
	"url": "https://leetcode-cn.com/problems/capital-gainloss/solution/by-clever-austinzya-9n8o/",
	"content": "### 解题思路\r\nCASE语句回顾：\r\n\r\n    case语句格式一\r\n\r\nCASE input_expression\r\n    WHEN expression1 THEN result_expression1\r\n    WHEN expression2 THEN result_expression2\r\n    [...n]\r\n    ELSE result_expression\r\n    END\r\n\r\nCASE语句在执行时，将CASE后的表达式的值与各WHEN子句的表达式值比较，如果相等，则执行THEN后面的表达式或语句，然后跳出CASE语句；否则，返回ELSE后面的表达式。\r\n\r\n    case语句格式二\r\n\r\nCASE\r\n    WHEN expression1 THEN result_expression1\r\n    WHEN expression2 THEN result_expression2\r\n    [...n]\r\n    ELSE result_expression\r\n    END\r\n\r\nCASE后面没有表达式，多个WHEN子句中的表达式依次执行，如果表达式结果为真，则执行相应THEN关键字后面的表达式或语句，执行完毕之后跳出CASE语句。如果所有WHEN语句都为FALSE，则执行ELSE子句中的语句。\r\n\r\n小tips：在交换数据和列转行时可以考虑使用case语句\r\n\r\n作者：ruirui-d\r\n链接：https://leetcode.cn/problems/capital-gainloss/solution/caseyu-ju-by-ruirui-d-10fd/\r\n来源：力扣（LeetCode）\r\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\r\n\r\n### 代码\r\n\r\n```mysql\r\n# Write your MySQL query statement below\r\n# 方法一 case when\r\n# select stock_name, sum(\r\n#     case when operation = 'buy' then -price\r\n#     else price end\r\n# ) as capital_gain_loss \r\n# from stocks \r\n# group by stock_name;\r\n\r\n# 方法二 if语句\r\nselect stock_name, sum(\r\n    if(operation = 'buy', -price, price)\r\n) as capital_gain_loss \r\nfrom stocks \r\ngroup by stock_name;\r\n```"
}