{
	"titleSlug": "XxZZjK",
	"slug": "zhao-gui-lu-han-jie-fa-de-zheng-ming-by-m43kf",
	"url": "https://leetcode-cn.com/problems/XxZZjK/solution/zhao-gui-lu-han-jie-fa-de-zheng-ming-by-m43kf/",
	"content": "## 解法：找规律\r\n从选手的角度来说，本题只要找规律猜结论即可。但是从题解的角度来说，还是应该给出解法的证明。因此这里尝试给出证明。\r\n\r\n下述参考代码将会构造一个长度是 $\\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor$ 的答案。因此我们首先需要证明，初始最少需要标记 $\\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor$ 个三角形。\r\n\r\n我们先来定义“外边”和“内边”：对于所有小三角形的边，与大三角形的边界重合的部分为“外边”，剩下的都叫“内边”。\r\n\r\n例如，下图展示了一个 $n = 3$ 的大三角形。红色的边是外边，黑色的边是内边。容易得知，小三角形共有 $n^2$ 个，外边有 $3n$ 条。\r\n\r\n![e.png](https://pic.leetcode-cn.com/1665163532-FBUxYN-e.png)\r\n\r\n根据题意，当一个未标记的小三角形与两个已标记的小三角形相邻时，该小三角形也被标记。另外，当一个初始未被标记的小三角形变为标记状态时，由于它的两条边已经被消耗掉了，它只剩一条边可以继续标记其它三角形。也就是说：\r\n> 消耗两条内边可以得到一个小三角形，以及一条外边或内边。\r\n\r\n设一开始共标记了 $x$ 个小三角形，这些小三角形共有 $a_0$ 条外边；之后第一轮新标记的小三角形共有 $a_1$ 条外边，第二轮新标记的小三角形共有 $a_2$ 条外边，...，我们有不等式：\r\n\r\n$$\r\n\\begin{matrix}\r\nn^2 & \\le & x + \\frac{3x - a_0}{2} + \\frac{\\frac{3x - a_0}{2} - a_1}{2} + \\frac{\\frac{\\frac{3x - a_0}{2} - a_1}{2} - a_2}{2} + \\cdots & \\text{生成的小三角形总数需要大等于 } n^2 \\\\\r\n& & & \\text{一开始被标记的小三角形有 } 3x - a_0 \\text{ 条内边} \\\\\r\n& & & \\text{因此可以生成 } \\frac{3x - a_0}{2} \\text{ 个三角形} \\\\\r\n& & & \\text{后面生成的三角形只有一条内边可用，因此没有乘以 } 3 \\\\\r\n\\\\\r\n\\hline\r\n\\\\\r\n& = & x + \\sum\\limits_{i=1}^{+\\infty}\\frac{3x}{2^i} - (\\sum\\limits_{i=1}^{+\\infty}\\frac{a_0}{2^i} + \\sum\\limits_{i=1}^{+\\infty}\\frac{a_1}{2^i} + \\sum\\limits_{i=1}^{+\\infty}\\frac{a_2}{2^i} + \\cdots) & \\text{把分子相同的项整理到一起} \\\\\r\n\\\\\r\n\\hline\r\n\\\\\r\n& = & 4x - (a_0 + a_1 + a_2 + \\cdots) & \\lim\\limits_{n \\to +\\infty}\\sum\\limits_{i=1}^n \\frac{1}{2^i} = 1 \\\\\r\n\\\\\r\n\\hline\r\n\\\\\r\n& = & 4x - 3n & a_0 + a_1 + a_2 + \\cdots \\text{ 是外边的总数} \\\\\r\n\\end{matrix}\r\n$$\r\n\r\n因此有 $4x - 3n \\ge n^2$，即 $x \\ge \\frac{n^2 + 3n}{4}$。\r\n\r\n注意到 $x$ 是整数，我们讨论 $n \\bmod 4$ 的情况：\r\n* $n \\bmod 4 = 0$ 或 $n \\bmod 4 = 1$，$\\frac{n^2 + 3n}{4}$ 是整数，因此 $x$ 的最小值是 $\\frac{n^2 + 3n}{4}$。又 $\\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor = \\frac{n^2 + 3n}{4} + \\lfloor\\frac{1}{2}\\rfloor = \\frac{n^2 + 3n}{4}$，因此 $x \\ge \\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor$ 成立。\r\n* $n \\bmod 4 = 2$ 或 $n \\bmod 4 = 3$，$\\frac{n^2 + 3n}{4}$ 的小数部分是 $\\frac{1}{2}$，因此 $x$ 是最小值是 $\\frac{n^2 + 3n}{4} + 1$。又 $\\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor = \\frac{n^2 + 3n}{4} + 1$，因此 $x \\ge \\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor$ 成立。\r\n\r\n这样我们就成功证明了初始最少需要标记 $\\lfloor\\frac{n^2 + 3n + 2}{4}\\rfloor$ 个三角形。\r\n\r\n## 参考代码（c++）\r\n```c++\r\nclass Solution {\r\npublic:\r\n    vector<vector<int>> sandyLandManagement(int n) {\r\n        vector<vector<int>> ans;\r\n        for (int i = 1; i < n; i++) for (int j = 1; j <= i * 2 - 1; j += 4) ans.push_back({i, j});\r\n        ans.push_back({n, 1});\r\n        if (n > 1) ans.push_back({n, n * 2 - 1});\r\n        for (int i = 4; i < n * 2 - 1; i += 8) ans.push_back({n, i});\r\n        for (int i = 7; i < n * 2 - 1; i += 8) ans.push_back({n, i});\r\n        for (int i = 9; i < n * 2 - 1; i += 8) ans.push_back({n, i});\r\n        return ans;\r\n    }\r\n};\r\n```"
}