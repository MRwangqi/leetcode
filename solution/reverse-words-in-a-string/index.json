{
	"titleSlug": "reverse-words-in-a-string",
	"slug": "fan-zhuan-zi-fu-chuan-li-de-dan-ci-by-leetcode-sol",
	"url": "https://leetcode-cn.com/problems/reverse-words-in-a-string/solution/fan-zhuan-zi-fu-chuan-li-de-dan-ci-by-leetcode-sol/",
	"content": "### ğŸ“º è§†é¢‘é¢˜è§£  \n\n![151. ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯.mp4](ce25c066-61cc-4629-aff8-1fccdb42816d)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n\n#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è¯­è¨€ç‰¹æ€§\n\n**æ€è·¯å’Œç®—æ³•**\n\nå¾ˆå¤šè¯­è¨€å¯¹å­—ç¬¦ä¸²æä¾›äº† `split`ï¼ˆæ‹†åˆ†ï¼‰ï¼Œ`reverse`ï¼ˆç¿»è½¬ï¼‰å’Œ `join`ï¼ˆè¿æ¥ï¼‰ç­‰æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€å•çš„è°ƒç”¨å†…ç½®çš„ API å®Œæˆæ“ä½œï¼š\n\n1. ä½¿ç”¨ `split` å°†å­—ç¬¦ä¸²æŒ‰ç©ºæ ¼åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼›\n2. ä½¿ç”¨ `reverse` å°†å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œåè½¬ï¼›\n3. ä½¿ç”¨ `join` æ–¹æ³•å°†å­—ç¬¦ä¸²æ•°ç»„æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n\n![fig](https://pic.leetcode-cn.com/Figures/151/fun2.png)\n\n```Python [sol1-Python3]\nclass Solution:\n    def reverseWords(self, s: str) -> str:\n        return \" \".join(reversed(s.split()))\n```\n\n```Java [sol1-Java]\nclass Solution {\n    public String reverseWords(String s) {\n        // é™¤å»å¼€å¤´å’Œæœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        s = s.trim();\n        // æ­£åˆ™åŒ¹é…è¿ç»­çš„ç©ºç™½å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦åˆ†å‰²\n        List<String> wordList = Arrays.asList(s.split(\"\\\\s+\"));\n        Collections.reverse(wordList);\n        return String.join(\" \", wordList);\n    }\n}\n```\n```JavaScript [sol1-JavaScript]\nvar reverseWords = function(s) {\n    return s.trim().split(/\\s+/).reverse().join(' ');\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºè¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²åˆ†å‰²ä¹‹åçš„ç»“æœã€‚\n\n#### æ–¹æ³•äºŒï¼šè‡ªè¡Œç¼–å†™å¯¹åº”çš„å‡½æ•°\n\n**æ€è·¯å’Œç®—æ³•**\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨è¯­è¨€ä¸­çš„ APIï¼Œè€Œæ˜¯è‡ªå·±ç¼–å†™å¯¹åº”çš„å‡½æ•°ã€‚åœ¨ä¸åŒè¯­è¨€ä¸­ï¼Œè¿™äº›å‡½æ•°å®ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸»è¦çš„å·®åˆ«æ˜¯æœ‰äº›è¯­è¨€çš„å­—ç¬¦ä¸²ä¸å¯å˜ï¼ˆå¦‚ Java å’Œ Python)ï¼Œæœ‰äº›è¯­è¨€çš„å­—ç¬¦ä¸²å¯å˜ï¼ˆå¦‚ C++)ã€‚\n\nå¯¹äºå­—ç¬¦ä¸²ä¸å¯å˜çš„è¯­è¨€ï¼Œé¦–å…ˆå¾—æŠŠå­—ç¬¦ä¸²è½¬åŒ–æˆå…¶ä»–å¯å˜çš„æ•°æ®ç»“æ„ï¼ŒåŒæ—¶è¿˜éœ€è¦åœ¨è½¬åŒ–çš„è¿‡ç¨‹ä¸­å»é™¤ç©ºæ ¼ã€‚\n\n![fig](https://pic.leetcode-cn.com/Figures/151/reverse_whole2.png)\n\nå¯¹äºå­—ç¬¦ä¸²å¯å˜çš„è¯­è¨€ï¼Œå°±ä¸éœ€è¦å†é¢å¤–å¼€è¾Ÿç©ºé—´äº†ï¼Œç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸ŠåŸåœ°å®ç°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåè½¬å­—ç¬¦å’Œå»é™¤ç©ºæ ¼å¯ä»¥ä¸€èµ·å®Œæˆã€‚\n\n![fig](https://pic.leetcode-cn.com/Figures/151/mutable2.png)\n\n```Python [sol2-Python3]\nclass Solution:\n    def trim_spaces(self, s: str) -> list:\n        left, right = 0, len(s) - 1\n        # å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦\n        while left <= right and s[left] == ' ':\n            left += 1\n        \n        # å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        while left <= right and s[right] == ' ':\n            right -= 1\n        \n        # å°†å­—ç¬¦ä¸²é—´å¤šä½™çš„ç©ºç™½å­—ç¬¦å»é™¤\n        output = []\n        while left <= right:\n            if s[left] != ' ':\n                output.append(s[left])\n            elif output[-1] != ' ':\n                output.append(s[left])\n            left += 1\n        \n        return output\n            \n    def reverse(self, l: list, left: int, right: int) -> None:\n        while left < right:\n            l[left], l[right] = l[right], l[left]\n            left, right = left + 1, right - 1\n            \n    def reverse_each_word(self, l: list) -> None:\n        n = len(l)\n        start = end = 0\n        \n        while start < n:\n            # å¾ªç¯è‡³å•è¯çš„æœ«å°¾\n            while end < n and l[end] != ' ':\n                end += 1\n            # ç¿»è½¬å•è¯\n            self.reverse(l, start, end - 1)\n            # æ›´æ–°startï¼Œå»æ‰¾ä¸‹ä¸€ä¸ªå•è¯\n            start = end + 1\n            end += 1\n                \n    def reverseWords(self, s: str) -> str:\n        l = self.trim_spaces(s)\n        \n        # ç¿»è½¬å­—ç¬¦ä¸²\n        self.reverse(l, 0, len(l) - 1)\n        \n        # ç¿»è½¬æ¯ä¸ªå•è¯\n        self.reverse_each_word(l)\n        \n        return ''.join(l)\n```\n\n```Java [sol2-Java]\nclass Solution {\n    public String reverseWords(String s) {\n        StringBuilder sb = trimSpaces(s);\n\n        // ç¿»è½¬å­—ç¬¦ä¸²\n        reverse(sb, 0, sb.length() - 1);\n\n        // ç¿»è½¬æ¯ä¸ªå•è¯\n        reverseEachWord(sb);\n\n        return sb.toString();\n    }\n\n    public StringBuilder trimSpaces(String s) {\n        int left = 0, right = s.length() - 1;\n        // å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦\n        while (left <= right && s.charAt(left) == ' ') {\n            ++left;\n        }\n\n        // å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        while (left <= right && s.charAt(right) == ' ') {\n            --right;\n        }\n\n        // å°†å­—ç¬¦ä¸²é—´å¤šä½™çš„ç©ºç™½å­—ç¬¦å»é™¤\n        StringBuilder sb = new StringBuilder();\n        while (left <= right) {\n            char c = s.charAt(left);\n\n            if (c != ' ') {\n                sb.append(c);\n            } else if (sb.charAt(sb.length() - 1) != ' ') {\n                sb.append(c);\n            }\n\n            ++left;\n        }\n        return sb;\n    }\n\n    public void reverse(StringBuilder sb, int left, int right) {\n        while (left < right) {\n            char tmp = sb.charAt(left);\n            sb.setCharAt(left++, sb.charAt(right));\n            sb.setCharAt(right--, tmp);\n        }\n    }\n\n    public void reverseEachWord(StringBuilder sb) {\n        int n = sb.length();\n        int start = 0, end = 0;\n\n        while (start < n) {\n            // å¾ªç¯è‡³å•è¯çš„æœ«å°¾\n            while (end < n && sb.charAt(end) != ' ') {\n                ++end;\n            }\n            // ç¿»è½¬å•è¯\n            reverse(sb, start, end - 1);\n            // æ›´æ–°startï¼Œå»æ‰¾ä¸‹ä¸€ä¸ªå•è¯\n            start = end + 1;\n            ++end;\n        }\n    }\n}\n```\n\n```C++ [sol2-C++]\nclass Solution {\npublic:\n    string reverseWords(string s) {\n        // åè½¬æ•´ä¸ªå­—ç¬¦ä¸²\n        reverse(s.begin(), s.end());\n\n        int n = s.size();\n        int idx = 0;\n        for (int start = 0; start < n; ++start) {\n            if (s[start] != ' ') {\n                // å¡«ä¸€ä¸ªç©ºç™½å­—ç¬¦ç„¶åå°†idxç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ä½ç½®\n                if (idx != 0) s[idx++] = ' ';\n\n                // å¾ªç¯éå†è‡³å•è¯çš„æœ«å°¾\n                int end = start;\n                while (end < n && s[end] != ' ') s[idx++] = s[end++];\n\n                // åè½¬æ•´ä¸ªå•è¯\n                reverse(s.begin() + idx - (end - start), s.begin() + idx);\n\n                // æ›´æ–°startï¼Œå»æ‰¾ä¸‹ä¸€ä¸ªå•è¯\n                start = end;\n            }\n        }\n        s.erase(s.begin() + idx, s.end());\n        return s;\n    }\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºè¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š`Java` å’Œ `Python` çš„æ–¹æ³•éœ€è¦ $O(n)$ çš„ç©ºé—´æ¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè€Œ `C++` æ–¹æ³•åªéœ€è¦ $O(1)$ çš„é¢å¤–ç©ºé—´æ¥å­˜æ”¾è‹¥å¹²å˜é‡ã€‚\n\n#### æ–¹æ³•ä¸‰ï¼šåŒç«¯é˜Ÿåˆ—\n\n**æ€è·¯å’Œç®—æ³•**\n\nç”±äºåŒç«¯é˜Ÿåˆ—æ”¯æŒä»é˜Ÿåˆ—å¤´éƒ¨æ’å…¥çš„æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ²¿ç€å­—ç¬¦ä¸²ä¸€ä¸ªä¸€ä¸ªå•è¯å¤„ç†ï¼Œç„¶åå°†å•è¯å‹å…¥é˜Ÿåˆ—çš„å¤´éƒ¨ï¼Œå†å°†é˜Ÿåˆ—è½¬æˆå­—ç¬¦ä¸²å³å¯ã€‚\n\n![fig](https://pic.leetcode-cn.com/Figures/151/deque2.png)\n\n```Python [sol3-Python3]\nclass Solution:\n    def reverseWords(self, s: str) -> str:\n        left, right = 0, len(s) - 1\n        # å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦\n        while left <= right and s[left] == ' ':\n            left += 1\n        \n        # å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        while left <= right and s[right] == ' ':\n            right -= 1\n            \n        d, word = collections.deque(), []\n        # å°†å•è¯ push åˆ°é˜Ÿåˆ—çš„å¤´éƒ¨\n        while left <= right:\n            if s[left] == ' ' and word:\n                d.appendleft(''.join(word))\n                word = []\n            elif s[left] != ' ':\n                word.append(s[left])\n            left += 1\n        d.appendleft(''.join(word))\n        \n        return ' '.join(d)\n```\n\n```Java [sol3-Java]\nclass Solution {\n    public String reverseWords(String s) {\n        int left = 0, right = s.length() - 1;\n        // å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦\n        while (left <= right && s.charAt(left) == ' ') {\n            ++left;\n        }\n\n        // å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        while (left <= right && s.charAt(right) == ' ') {\n            --right;\n        }\n\n        Deque<String> d = new ArrayDeque<String>();\n        StringBuilder word = new StringBuilder();\n        \n        while (left <= right) {\n            char c = s.charAt(left);\n            if ((word.length() != 0) && (c == ' ')) {\n                // å°†å•è¯ push åˆ°é˜Ÿåˆ—çš„å¤´éƒ¨\n                d.offerFirst(word.toString());\n                word.setLength(0);\n            } else if (c != ' ') {\n                word.append(c);\n            }\n            ++left;\n        }\n        d.offerFirst(word.toString());\n\n        return String.join(\" \", d);\n    }\n}\n```\n\n```C++ [sol3-C++]\nclass Solution {\npublic:\n    string reverseWords(string s) {\n        int left = 0, right = s.size() - 1;\n        // å»æ‰å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦\n        while (left <= right && s[left] == ' ') ++left;\n\n        // å»æ‰å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        while (left <= right && s[right] == ' ') --right;\n\n        deque<string> d;\n        string word;\n\n        while (left <= right) {\n            char c = s[left];\n            if (word.size() && c == ' ') {\n                // å°†å•è¯ push åˆ°é˜Ÿåˆ—çš„å¤´éƒ¨\n                d.push_front(move(word));\n                word = \"\";\n            }\n            else if (c != ' ') {\n                word += c;\n            }\n            ++left;\n        }\n        d.push_front(move(word));\n        \n        string ans;\n        while (!d.empty()) {\n            ans += d.front();\n            d.pop_front();\n            if (!d.empty()) ans += ' ';\n        }\n        return ans;\n    }\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºè¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼ŒåŒç«¯é˜Ÿåˆ—å­˜å‚¨å•è¯éœ€è¦ $O(n)$ çš„ç©ºé—´ã€‚"
}