{
	"titleSlug": "ji-qi-ren-de-yun-dong-fan-wei-lcof",
	"slug": "ji-qi-ren-de-yun-dong-fan-wei-by-leetcode-solution",
	"url": "https://leetcode-cn.com/problems/ji-qi-ren-de-yun-dong-fan-wei-lcof/solution/ji-qi-ren-de-yun-dong-fan-wei-by-leetcode-solution/",
	"content": "### ğŸ“º è§†é¢‘é¢˜è§£ \n![é¢è¯•é¢˜13. æœºå™¨äººçš„è¿åŠ¨èŒƒå›´.mp4](e6467d4b-26c4-4f19-b91d-26b0a342f3a1)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n\n#### æ–¹æ³•ä¸€ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢\n\n**æ€è·¯å’Œç®—æ³•**\n\næˆ‘ä»¬å°†è¡Œåæ ‡å’Œåˆ—åæ ‡æ•°ä½ä¹‹å’Œå¤§äº `k` çš„æ ¼å­çœ‹ä½œéšœç¢ç‰©ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±æ˜¯ä¸€é“å¾ˆä¼ ç»Ÿçš„æœç´¢é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æˆ–è€…æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è§£å†³å®ƒï¼Œæœ¬æ–‡é€‰æ‹©ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ–¹æ³•æ¥è®²è§£ã€‚\n\né‚£ä¹ˆå¦‚ä½•è®¡ç®—ä¸€ä¸ªæ•°çš„æ•°ä½ä¹‹å’Œå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦å¯¹æ•° `x` æ¯æ¬¡å¯¹ `10` å–ä½™ï¼Œå°±èƒ½çŸ¥é“æ•° `x` çš„ä¸ªä½æ•°æ˜¯å¤šå°‘ï¼Œç„¶åå†å°† `x` é™¤ `10`ï¼Œè¿™ä¸ªæ“ä½œç­‰ä»·äºå°† `x` çš„åè¿›åˆ¶æ•°å‘å³ç§»ä¸€ä½ï¼Œåˆ é™¤ä¸ªä½æ•°ï¼ˆç±»ä¼¼äºäºŒè¿›åˆ¶ä¸­çš„ `>>` å³ç§»è¿ç®—ç¬¦ï¼‰ï¼Œä¸æ–­é‡å¤ç›´åˆ° `x` ä¸º `0` æ—¶ç»“æŸã€‚\n\nåŒæ—¶è¿™é“é¢˜è¿˜æœ‰ä¸€ä¸ªéšè—çš„ä¼˜åŒ–ï¼šæˆ‘ä»¬åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­æœç´¢æ–¹å‘å¯ä»¥ç¼©å‡ä¸ºå‘å³å’Œå‘ä¸‹ï¼Œè€Œä¸å¿…å†å‘ä¸Šå’Œå‘å·¦è¿›è¡Œæœç´¢ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å±•ç¤ºäº† `16 * 16` çš„åœ°å›¾éšç€é™åˆ¶æ¡ä»¶ `k` çš„æ”¾å¤§ï¼Œå¯è¡Œæ–¹æ ¼çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ¯ä¸ªæ ¼å­é‡Œçš„å€¼ä¸ºè¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œï¼Œè“è‰²æ–¹æ ¼ä»£è¡¨ééšœç¢æ–¹æ ¼ï¼Œå³å…¶å€¼å°äºç­‰äºå½“å‰çš„é™åˆ¶æ¡ä»¶ `k`ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°éšç€é™åˆ¶æ¡ä»¶ `k` çš„å¢å¤§ï¼Œ`(0, 0)` æ‰€åœ¨çš„è“è‰²æ–¹æ ¼åŒºåŸŸå†…æ–°åŠ å…¥çš„ééšœç¢æ–¹æ ¼éƒ½å¯ä»¥ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ã€‚è€Œå…¶ä»–ä¸è¿é€šçš„è“è‰²æ–¹æ ¼åŒºåŸŸä¼šéšç€ `k` çš„å¢å¤§è€Œè¿é€šï¼Œä¸”è¿é€šçš„æ—¶å€™ä¹Ÿæ˜¯ç”±ä¸Šæ–¹æˆ–å·¦æ–¹çš„æ ¼å­ç§»åŠ¨ä¸€æ­¥å¾—åˆ°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æœç´¢æ–¹å‘ç¼©å‡ä¸ºå‘å³æˆ–å‘ä¸‹ã€‚\n\n<![1.JPG](https://pic.leetcode-cn.com/6c80ef7224efa9a8f3589afdc83681fa50b2b231ad5f188ff2e5a92d4a6db47c-%E5%B9%BB%E7%81%AF%E7%89%871.JPG),![2.JPG](https://pic.leetcode-cn.com/a5addecac64254ee7f899819d5c4e65117b786c747975de1d2d9cd2f309aab92-%E5%B9%BB%E7%81%AF%E7%89%872.JPG),![3.JPG](https://pic.leetcode-cn.com/7eab5519c96fef9d4b06a413d9ad4ab18dc47012c0db0b9b60947f60229bb8e1-%E5%B9%BB%E7%81%AF%E7%89%873.JPG),![4.JPG](https://pic.leetcode-cn.com/103c2cc71fde196f82e8f4f57397a88775588b4b15d5e0179174a7cc82da2aea-%E5%B9%BB%E7%81%AF%E7%89%874.JPG),![5.JPG](https://pic.leetcode-cn.com/137722bcc28f3f640597a427855e3760cd3d437a7a84f34578abb2c0bab6e331-%E5%B9%BB%E7%81%AF%E7%89%875.JPG),![6.JPG](https://pic.leetcode-cn.com/e26b7cb04cea2dc00c0285008ef409bfdc6569e1c603340d065fc37b80e85bf0-%E5%B9%BB%E7%81%AF%E7%89%876.JPG),![7.JPG](https://pic.leetcode-cn.com/eb360a76b26e583f23a5c8743c6f398f84be3d292d17179327f8c57ddab784b0-%E5%B9%BB%E7%81%AF%E7%89%877.JPG),![8.JPG](https://pic.leetcode-cn.com/858d08887e25e9f3503e28ad5b3d2e0fafdf8b69c0b534f8e222662acc8eb00e-%E5%B9%BB%E7%81%AF%E7%89%878.JPG),![9.JPG](https://pic.leetcode-cn.com/20e6c066e9e692646035d87cf1b11c415c6ac5940bbaf37a70d3470cbe3cd5f1-%E5%B9%BB%E7%81%AF%E7%89%879.JPG),![10.JPG](https://pic.leetcode-cn.com/2019c08d97a5868606aa510808d9b1c147e484f95e3ee90819dd118387dcb4e4-%E5%B9%BB%E7%81%AF%E7%89%8710.JPG),![11.JPG](https://pic.leetcode-cn.com/4bb1c245fa8fe7b198afcefb8810b8bed5f764ad67f5c7a54b05663854f765f1-%E5%B9%BB%E7%81%AF%E7%89%8711.JPG),![12.JPG](https://pic.leetcode-cn.com/14979dd0f8fd3ec17534b40a045ab11bf1dd091b162f4e3a969b05a2e7e9ddd7-%E5%B9%BB%E7%81%AF%E7%89%8712.JPG),![13.JPG](https://pic.leetcode-cn.com/b9bc2e2a3fa00e833af400d03e18e5943379ca83083712c30e4b7a1475980b22-%E5%B9%BB%E7%81%AF%E7%89%8713.JPG),![14.JPG](https://pic.leetcode-cn.com/091ef7500dc339c58501425ef07e3f7aca4f3c94ef0db088b8fb70421ad7999f-%E5%B9%BB%E7%81%AF%E7%89%8714.JPG),![15.JPG](https://pic.leetcode-cn.com/beecfe15fc0274544927c091f87960a8348279007a95afda7e4f2fdca0d5d41e-%E5%B9%BB%E7%81%AF%E7%89%8715.JPG),![16.JPG](https://pic.leetcode-cn.com/a411d617481f8d07524856ce48be3e2313247b1b5d4d86048e365b2f1c28cd4b-%E5%B9%BB%E7%81%AF%E7%89%8716.JPG),![17.JPG](https://pic.leetcode-cn.com/efe911f7e9485c4d47367344e9d4ffc36da6fff9975f6b7f4d6bda8cda723b5d-%E5%B9%BB%E7%81%AF%E7%89%8717.JPG),![18.JPG](https://pic.leetcode-cn.com/75deefae1c4f7bbeb82c8ee1d61c3726ca18f26018d6e8ffdbcb24b20a79a2bf-%E5%B9%BB%E7%81%AF%E7%89%8718.JPG),![19.JPG](https://pic.leetcode-cn.com/e2a18a98608616eb5ba81b853854a2e51267ef8f20a6ed1f6bf6e2bf4a259283-%E5%B9%BB%E7%81%AF%E7%89%8719.JPG)>\n\n```C++ [sol1-C++]\nclass Solution {\n    // è®¡ç®— x çš„æ•°ä½ä¹‹å’Œ\n    int get(int x) {\n        int res=0;\n        for (; x; x /= 10) {\n            res += x % 10;\n        }\n        return res;\n    }\npublic:\n    int movingCount(int m, int n, int k) {\n        if (!k) return 1;\n        queue<pair<int,int> > Q;\n        // å‘å³å’Œå‘ä¸‹çš„æ–¹å‘æ•°ç»„\n        int dx[2] = {0, 1};\n        int dy[2] = {1, 0};\n        vector<vector<int> > vis(m, vector<int>(n, 0));\n        Q.push(make_pair(0, 0));\n        vis[0][0] = 1;\n        int ans = 1;\n        while (!Q.empty()) {\n            auto [x, y] = Q.front();\n            Q.pop();\n            for (int i = 0; i < 2; ++i) {\n                int tx = dx[i] + x;\n                int ty = dy[i] + y;\n                if (tx < 0 || tx >= m || ty < 0 || ty >= n || vis[tx][ty] || get(tx) + get(ty) > k) continue;\n                Q.push(make_pair(tx, ty));\n                vis[tx][ty] = 1;\n                ans++;\n            }\n        }\n        return ans;\n    }\n};\n```\n```Java [sol1-Java]\nclass Solution {\n    public int movingCount(int m, int n, int k) {\n        if (k == 0) {\n            return 1;\n        }\n        Queue<int[]> queue = new LinkedList<int[]>();\n        // å‘å³å’Œå‘ä¸‹çš„æ–¹å‘æ•°ç»„\n        int[] dx = {0, 1};\n        int[] dy = {1, 0};\n        boolean[][] vis = new boolean[m][n];\n        queue.offer(new int[]{0, 0});\n        vis[0][0] = true;\n        int ans = 1;\n        while (!queue.isEmpty()) {\n            int[] cell = queue.poll();\n            int x = cell[0], y = cell[1];\n            for (int i = 0; i < 2; ++i) {\n                int tx = dx[i] + x;\n                int ty = dy[i] + y;\n                if (tx < 0 || tx >= m || ty < 0 || ty >= n || vis[tx][ty] || get(tx) + get(ty) > k) {\n                    continue;\n                }\n                queue.offer(new int[]{tx, ty});\n                vis[tx][ty] = true;\n                ans++;\n            }\n        }\n        return ans;\n    }\n\n    private int get(int x) {\n        int res = 0;\n        while (x != 0) {\n            res += x % 10;\n            x /= 10;\n        }\n        return res;\n    }\n}\n```\n```Python [sol1-Python3]\ndef digitsum(n):\n    ans = 0\n    while n:\n        ans += n % 10\n        n //= 10\n    return ans\n\nclass Solution:\n    def movingCount(self, m: int, n: int, k: int) -> int:\n        from queue import Queue\n        q = Queue()\n        q.put((0, 0))\n        s = set()\n        while not q.empty():\n            x, y = q.get()\n            if (x, y) not in s and 0 <= x < m and 0 <= y < n and digitsum(x) + digitsum(y) <= k:\n                s.add((x, y))\n                for nx, ny in [(x + 1, y), (x, y + 1)]:\n                    q.put((nx, ny))\n        return len(s)\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå…¶ä¸­ `m` ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œ`n` ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚è€ƒè™‘æ‰€æœ‰æ ¼å­éƒ½èƒ½è¿›å…¥ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶å€™ä¸€ä¸ªæ ¼å­æœ€å¤šä¼šè¢«è®¿é—®çš„æ¬¡æ•°ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(2mn)=O(mn)$ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå…¶ä¸­ `m` ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œ`n` ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚æœç´¢çš„æ—¶å€™éœ€è¦ä¸€ä¸ªå¤§å°ä¸º $O(mn)$ çš„æ ‡è®°ç»“æ„ç”¨æ¥æ ‡è®°æ¯ä¸ªæ ¼å­æ˜¯å¦è¢«èµ°è¿‡ã€‚\n\n#### æ–¹æ³•äºŒï¼šé€’æ¨\n\n**æ€è·¯**\n\nè€ƒè™‘åˆ°æ–¹æ³•ä¸€æåˆ°æœç´¢çš„æ–¹å‘åªéœ€è¦æœä¸‹æˆ–æœå³ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ç§é€’æ¨çš„æ±‚è§£æ–¹æ³•ã€‚\n\n**ç®—æ³•**\n\nå®šä¹‰ `vis[i][j]` ä¸º `(i, j)` åæ ‡æ˜¯å¦å¯è¾¾ï¼Œå¦‚æœå¯è¾¾è¿”å› `1`ï¼Œå¦åˆ™è¿”å› `0`ã€‚\n\né¦–å…ˆ `(i, j)` æœ¬èº«éœ€è¦å¯ä»¥è¿›å…¥ï¼Œå› æ­¤éœ€è¦å…ˆåˆ¤æ–­ `i` å’Œ `j` çš„æ•°ä½ä¹‹å’Œæ˜¯å¦å¤§äº `k` ï¼Œå¦‚æœå¤§äºçš„è¯ç›´æ¥è®¾ç½® `vis[i][j]` ä¸ºä¸å¯è¾¾å³å¯ã€‚\n\nå¦åˆ™ï¼Œå‰é¢æåˆ°æœç´¢æ–¹å‘åªéœ€æœä¸‹æˆ–æœå³ï¼Œå› æ­¤ `(i, j)` çš„æ ¼å­åªä¼šä» `(i - 1, j)` æˆ–è€… `(i, j - 1)` ä¸¤ä¸ªæ ¼å­èµ°è¿‡æ¥ï¼ˆä¸è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼‰ï¼Œé‚£ä¹ˆ `vis[i][j]` æ˜¯å¦å¯è¾¾çš„çŠ¶æ€åˆ™å¯ç”±å¦‚ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°ï¼š\n$$\n\\textit{vis}[i][j]=\\textit{vis}[i-1][j]\\ \\textrm{or}\\ \\textit{vis}[i][j-1]\n$$\nå³åªè¦æœ‰ä¸€ä¸ªæ ¼å­å¯è¾¾ï¼Œé‚£ä¹ˆ `(i, j)` è¿™ä¸ªæ ¼å­å°±æ˜¯å¯è¾¾çš„ï¼Œå› æ­¤æˆ‘ä»¬åªè¦éå†æ‰€æœ‰æ ¼å­ï¼Œé€’æ¨è®¡ç®—å‡ºå®ƒä»¬æ˜¯å¦å¯è¾¾ç„¶åç”¨å˜é‡ `ans` è®°å½•å¯è¾¾çš„æ ¼å­æ•°é‡å³å¯ã€‚\n\nåˆå§‹æ¡ä»¶ `vis[i][j] = 1` ï¼Œé€’æ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­æ³¨æ„è¾¹ç•Œçš„å¤„ç†ã€‚\n\n```C++ [sol2-C++]\nclass Solution {\n    int get(int x) {\n        int res=0;\n        for (; x; x /= 10){\n            res += x % 10;\n        }\n        return res;\n    }\npublic:\n    int movingCount(int m, int n, int k) {\n        if (!k) return 1;\n        vector<vector<int> > vis(m, vector<int>(n, 0));\n        int ans = 1;\n        vis[0][0] = 1;\n        for (int i = 0; i < m; ++i) {\n            for (int j = 0; j < n; ++j) {\n                if ((i == 0 && j == 0) || get(i) + get(j) > k) continue;\n                // è¾¹ç•Œåˆ¤æ–­\n                if (i - 1 >= 0) vis[i][j] |= vis[i - 1][j];\n                if (j - 1 >= 0) vis[i][j] |= vis[i][j - 1];\n                ans += vis[i][j];\n            }\n        }\n        return ans;\n    }\n};\n```\n```Java [sol2-Java]\nclass Solution {\n    public int movingCount(int m, int n, int k) {\n        if (k == 0) {\n            return 1;\n        }\n        boolean[][] vis = new boolean[m][n];\n        int ans = 1;\n        vis[0][0] = true;\n        for (int i = 0; i < m; ++i) {\n            for (int j = 0; j < n; ++j) {\n                if ((i == 0 && j == 0) || get(i) + get(j) > k) {\n                    continue;\n                }\n                // è¾¹ç•Œåˆ¤æ–­\n                if (i - 1 >= 0) {\n                    vis[i][j] |= vis[i - 1][j];\n                }\n                if (j - 1 >= 0) {\n                    vis[i][j] |= vis[i][j - 1];\n                }\n                ans += vis[i][j] ? 1 : 0;\n            }\n        }\n        return ans;\n    }\n\n    private int get(int x) {\n        int res = 0;\n        while (x != 0) {\n            res += x % 10;\n            x /= 10;\n        }\n        return res;\n    }\n}\n```\n```Python [sol2-Python3]\ndef digitsum(n):\n    ans = 0\n    while n:\n        ans += n % 10\n        n //= 10\n    return ans\n\nclass Solution:\n    def movingCount(self, m: int, n: int, k: int) -> int:\n        vis = set([(0, 0)])\n        for i in range(m):\n            for j in range(n):\n                if ((i - 1, j) in vis or (i, j - 1) in vis) and digitsum(i) + digitsum(j) <= k:\n                    vis.add((i, j))\n        return len(vis)\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå…¶ä¸­ `m` ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œ `n` ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚ä¸€å…±æœ‰ $O(mn)$ ä¸ªçŠ¶æ€éœ€è¦è®¡ç®—ï¼Œæ¯ä¸ªçŠ¶æ€é€’æ¨è®¡ç®—çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œæ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(mn)$ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå…¶ä¸­ `m`  ä¸ºæ–¹æ ¼çš„è¡Œæ•°ï¼Œ`n` ä¸ºæ–¹æ ¼çš„åˆ—æ•°ã€‚æˆ‘ä»¬éœ€è¦ $O(mn)$ å¤§å°çš„ç»“æ„æ¥è®°å½•æ¯ä¸ªä½ç½®æ˜¯å¦å¯è¾¾ã€‚"
}