{
	"titleSlug": "maximal-square",
	"slug": "zui-da-zheng-fang-xing-by-leetcode-solution",
	"url": "https://leetcode-cn.com/problems/maximal-square/solution/zui-da-zheng-fang-xing-by-leetcode-solution/",
	"content": "### ğŸ“º è§†é¢‘é¢˜è§£  \n![221. æœ€å¤§æ­£æ–¹å½¢.mp4](3cb7322a-5285-49a0-b0e6-539a84fa8dd5)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n#### æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•\n\nç”±äºæ­£æ–¹å½¢çš„é¢ç§¯ç­‰äºè¾¹é•¿çš„å¹³æ–¹ï¼Œå› æ­¤è¦æ‰¾åˆ°æœ€å¤§æ­£æ–¹å½¢çš„é¢ç§¯ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿ï¼Œç„¶åè®¡ç®—æœ€å¤§è¾¹é•¿çš„å¹³æ–¹å³å¯ã€‚\n\næš´åŠ›æ³•æ˜¯æœ€ç®€å•ç›´è§‚çš„åšæ³•ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ï¼š\n\n- éå†çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡é‡åˆ° $1$ï¼Œåˆ™å°†è¯¥å…ƒç´ ä½œä¸ºæ­£æ–¹å½¢çš„å·¦ä¸Šè§’ï¼›\n\n- ç¡®å®šæ­£æ–¹å½¢çš„å·¦ä¸Šè§’åï¼Œæ ¹æ®å·¦ä¸Šè§’æ‰€åœ¨çš„è¡Œå’Œåˆ—è®¡ç®—å¯èƒ½çš„æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿ï¼ˆæ­£æ–¹å½¢çš„èŒƒå›´ä¸èƒ½è¶…å‡ºçŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ï¼‰ï¼Œåœ¨è¯¥è¾¹é•¿èŒƒå›´å†…å¯»æ‰¾åªåŒ…å« $1$ çš„æœ€å¤§æ­£æ–¹å½¢ï¼›\n\n- æ¯æ¬¡åœ¨ä¸‹æ–¹æ–°å¢ä¸€è¡Œä»¥åŠåœ¨å³æ–¹æ–°å¢ä¸€åˆ—ï¼Œåˆ¤æ–­æ–°å¢çš„è¡Œå’Œåˆ—æ˜¯å¦æ»¡è¶³æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ $1$ã€‚\n\n```Java [sol1-Java]\nclass Solution {\n    public int maximalSquare(char[][] matrix) {\n        int maxSide = 0;\n        if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {\n            return maxSide;\n        }\n        int rows = matrix.length, columns = matrix[0].length;\n        for (int i = 0; i < rows; i++) {\n            for (int j = 0; j < columns; j++) {\n                if (matrix[i][j] == '1') {\n                    // é‡åˆ°ä¸€ä¸ª 1 ä½œä¸ºæ­£æ–¹å½¢çš„å·¦ä¸Šè§’\n                    maxSide = Math.max(maxSide, 1);\n                    // è®¡ç®—å¯èƒ½çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿\n                    int currentMaxSide = Math.min(rows - i, columns - j);\n                    for (int k = 1; k < currentMaxSide; k++) {\n                        // åˆ¤æ–­æ–°å¢çš„ä¸€è¡Œä¸€åˆ—æ˜¯å¦å‡ä¸º 1\n                        boolean flag = true;\n                        if (matrix[i + k][j + k] == '0') {\n                            break;\n                        }\n                        for (int m = 0; m < k; m++) {\n                            if (matrix[i + k][j + m] == '0' || matrix[i + m][j + k] == '0') {\n                                flag = false;\n                                break;\n                            }\n                        }\n                        if (flag) {\n                            maxSide = Math.max(maxSide, k + 1);\n                        } else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        int maxSquare = maxSide * maxSide;\n        return maxSquare;\n    }\n}\n```\n\n```C++ [sol1-C++]\nclass Solution {\npublic:\n    int maximalSquare(vector<vector<char>>& matrix) {\n        if (matrix.size() == 0 || matrix[0].size() == 0) {\n            return 0;\n        }\n        int maxSide = 0;\n        int rows = matrix.size(), columns = matrix[0].size();\n        for (int i = 0; i < rows; i++) {\n            for (int j = 0; j < columns; j++) {\n                if (matrix[i][j] == '1') {\n                    // é‡åˆ°ä¸€ä¸ª 1 ä½œä¸ºæ­£æ–¹å½¢çš„å·¦ä¸Šè§’\n                    maxSide = max(maxSide, 1);\n                    // è®¡ç®—å¯èƒ½çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿\n                    int currentMaxSide = min(rows - i, columns - j);\n                    for (int k = 1; k < currentMaxSide; k++) {\n                        // åˆ¤æ–­æ–°å¢çš„ä¸€è¡Œä¸€åˆ—æ˜¯å¦å‡ä¸º 1\n                        bool flag = true;\n                        if (matrix[i + k][j + k] == '0') {\n                            break;\n                        }\n                        for (int m = 0; m < k; m++) {\n                            if (matrix[i + k][j + m] == '0' || matrix[i + m][j + k] == '0') {\n                                flag = false;\n                                break;\n                            }\n                        }\n                        if (flag) {\n                            maxSide = max(maxSide, k + 1);\n                        } else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        int maxSquare = maxSide * maxSide;\n        return maxSquare;\n    }\n};\n```\n\n```Python [sol1-Python3]\nclass Solution:\n    def maximalSquare(self, matrix: List[List[str]]) -> int:\n        if len(matrix) == 0 or len(matrix[0]) == 0:\n            return 0\n        \n        maxSide = 0\n        rows, columns = len(matrix), len(matrix[0])\n        for i in range(rows):\n            for j in range(columns):\n                if matrix[i][j] == '1':\n                    # é‡åˆ°ä¸€ä¸ª 1 ä½œä¸ºæ­£æ–¹å½¢çš„å·¦ä¸Šè§’\n                    maxSide = max(maxSide, 1)\n                    # è®¡ç®—å¯èƒ½çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿\n                    currentMaxSide = min(rows - i, columns - j)\n                    for k in range(1, currentMaxSide):\n                        # åˆ¤æ–­æ–°å¢çš„ä¸€è¡Œä¸€åˆ—æ˜¯å¦å‡ä¸º 1\n                        flag = True\n                        if matrix[i + k][j + k] == '0':\n                            break\n                        for m in range(k):\n                            if matrix[i + k][j + m] == '0' or matrix[i + m][j + k] == '0':\n                                flag = False\n                                break\n                        if flag:\n                            maxSide = max(maxSide, k + 1)\n                        else:\n                            break\n        \n        maxSquare = maxSide * maxSide\n        return maxSquare\n```\n\n```golang [sol1-Golang]\nfunc maximalSquare(matrix [][]byte) int {\n    maxSide := 0\n    if len(matrix) == 0 || len(matrix[0]) == 0 {\n        return maxSide\n    }\n    rows, columns := len(matrix), len(matrix[0])\n    for i := 0; i < rows; i++ {\n        for j := 0; j < columns; j++ {\n            if matrix[i][j] == '1' {\n                maxSide = max(maxSide, 1)\n                curMaxSide := min(rows - i, columns - j)\n                for k := 1; k < curMaxSide; k++ {\n                    flag := true\n                    if matrix[i+k][j+k] == '0' {\n                        break\n                    }\n                    for m := 0; m < k; m++ {\n                        if matrix[i+k][j+m] == '0' || matrix[i+m][j+k] == '0' {\n                            flag = false\n                            break\n                        }\n                    }\n                    if flag {\n                        maxSide = max(maxSide, k + 1)\n                    } else {\n                        break\n                    }\n                }\n            }\n        }\n    }\n    return maxSide * maxSide\n}\n\nfunc max(x, y int) int {\n    if x > y {\n        return x\n    }\n    return y\n}\n\nfunc min(x, y int) int {\n    if x < y {\n        return x\n    }\n    return y\n}\n\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(mn \\min(m,n)^2)$ï¼Œå…¶ä¸­ $m$ å’Œ $n$ æ˜¯çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ã€‚\n   * éœ€è¦éå†æ•´ä¸ªçŸ©é˜µå¯»æ‰¾æ¯ä¸ª $1$ï¼Œéå†çŸ©é˜µçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(mn)$ã€‚\n   * å¯¹äºæ¯ä¸ªå¯èƒ½çš„æ­£æ–¹å½¢ï¼Œå…¶è¾¹é•¿ä¸è¶…è¿‡ $m$ å’Œ $n$ ä¸­çš„æœ€å°å€¼ï¼Œéœ€è¦éå†è¯¥æ­£æ–¹å½¢ä¸­çš„æ¯ä¸ªå…ƒç´ åˆ¤æ–­æ˜¯ä¸æ˜¯åªåŒ…å« $1$ï¼Œéå†æ­£æ–¹å½¢æ—¶é—´å¤æ‚åº¦æ˜¯ $O(\\min(m,n)^2)$ã€‚\n   * æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ $O(mn \\min(m,n)^2)$ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚é¢å¤–ä½¿ç”¨çš„ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚\n\n#### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’\n\næ–¹æ³•ä¸€è™½ç„¶ç›´è§‚ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦å¤ªé«˜ï¼Œæœ‰æ²¡æœ‰åŠæ³•é™ä½æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’é™ä½æ—¶é—´å¤æ‚åº¦ã€‚æˆ‘ä»¬ç”¨ $\\textit{dp}(i, j)$ è¡¨ç¤ºä»¥ $(i, j)$ ä¸ºå³ä¸‹è§’ï¼Œä¸”åªåŒ…å« $1$ çš„æ­£æ–¹å½¢çš„è¾¹é•¿æœ€å¤§å€¼ã€‚å¦‚æœæˆ‘ä»¬èƒ½è®¡ç®—å‡ºæ‰€æœ‰ $\\textit{dp}(i, j)$ çš„å€¼ï¼Œé‚£ä¹ˆå…¶ä¸­çš„æœ€å¤§å€¼å³ä¸ºçŸ©é˜µä¸­åªåŒ…å« $1$ çš„æ­£æ–¹å½¢çš„è¾¹é•¿æœ€å¤§å€¼ï¼Œå…¶å¹³æ–¹å³ä¸ºæœ€å¤§æ­£æ–¹å½¢çš„é¢ç§¯ã€‚\n\né‚£ä¹ˆå¦‚ä½•è®¡ç®— $\\textit{dp}$ ä¸­çš„æ¯ä¸ªå…ƒç´ å€¼å‘¢ï¼Ÿå¯¹äºæ¯ä¸ªä½ç½® $(i, j)$ï¼Œæ£€æŸ¥åœ¨çŸ©é˜µä¸­è¯¥ä½ç½®çš„å€¼ï¼š\n\n- å¦‚æœè¯¥ä½ç½®çš„å€¼æ˜¯ $0$ï¼Œåˆ™ $\\textit{dp}(i, j) = 0$ï¼Œå› ä¸ºå½“å‰ä½ç½®ä¸å¯èƒ½åœ¨ç”± $1$ ç»„æˆçš„æ­£æ–¹å½¢ä¸­ï¼›\n\n- å¦‚æœè¯¥ä½ç½®çš„å€¼æ˜¯ $1$ï¼Œåˆ™ $\\textit{dp}(i, j)$ çš„å€¼ç”±å…¶ä¸Šæ–¹ã€å·¦æ–¹å’Œå·¦ä¸Šæ–¹çš„ä¸‰ä¸ªç›¸é‚»ä½ç½®çš„ $\\textit{dp}$ å€¼å†³å®šã€‚å…·ä½“è€Œè¨€ï¼Œå½“å‰ä½ç½®çš„å…ƒç´ å€¼ç­‰äºä¸‰ä¸ªç›¸é‚»ä½ç½®çš„å…ƒç´ ä¸­çš„æœ€å°å€¼åŠ  $1$ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š\n\n  $$\n  dp(i, j)=min(dp(iâˆ’1, j), dp(iâˆ’1, jâˆ’1), dp(i, jâˆ’1))+1\n  $$\n\n  å¦‚æœè¯»è€…å¯¹è¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ„Ÿåˆ°ä¸è§£ï¼Œå¯ä»¥å‚è€ƒ [1277. ç»Ÿè®¡å…¨ä¸º 1 çš„æ­£æ–¹å½¢å­çŸ©é˜µçš„å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/count-square-submatrices-with-all-ones/solution/tong-ji-quan-wei-1-de-zheng-fang-xing-zi-ju-zhen-2/)ï¼Œå…¶ä¸­ç»™å‡ºäº†è¯¦ç»†çš„è¯æ˜ã€‚\n\n  æ­¤å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘è¾¹ç•Œæ¡ä»¶ã€‚å¦‚æœ $i$ å’Œ $j$ ä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸º $0$ï¼Œåˆ™ä»¥ä½ç½® $(i, j)$ ä¸ºå³ä¸‹è§’çš„æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿åªèƒ½æ˜¯ $1$ï¼Œå› æ­¤ $\\textit{dp}(i, j) = 1$ã€‚\n\nä»¥ä¸‹ç”¨ä¸€ä¸ªä¾‹å­å…·ä½“è¯´æ˜ã€‚åŸå§‹çŸ©é˜µå¦‚ä¸‹ã€‚\n\n```\n0 1 1 1 0\n1 1 1 1 0\n0 1 1 1 1\n0 1 1 1 1\n0 0 1 1 1\n```\n\nå¯¹åº”çš„ $\\textit{dp}$ å€¼å¦‚ä¸‹ã€‚\n\n```\n0 1 1 1 0\n1 1 2 2 0\n0 1 2 3 1\n0 1 2 3 2\n0 0 1 2 3\n```\n\nä¸‹å›¾ä¹Ÿç»™å‡ºäº†è®¡ç®— $\\textit{dp}$ å€¼çš„è¿‡ç¨‹ã€‚\n\n![fig1](https://assets.leetcode-cn.com/solution-static/221/221_fig1.png)\n\n```Java [sol2-Java]\nclass Solution {\n    public int maximalSquare(char[][] matrix) {\n        int maxSide = 0;\n        if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {\n            return maxSide;\n        }\n        int rows = matrix.length, columns = matrix[0].length;\n        int[][] dp = new int[rows][columns];\n        for (int i = 0; i < rows; i++) {\n            for (int j = 0; j < columns; j++) {\n                if (matrix[i][j] == '1') {\n                    if (i == 0 || j == 0) {\n                        dp[i][j] = 1;\n                    } else {\n                        dp[i][j] = Math.min(Math.min(dp[i - 1][j], dp[i][j - 1]), dp[i - 1][j - 1]) + 1;\n                    }\n                    maxSide = Math.max(maxSide, dp[i][j]);\n                }\n            }\n        }\n        int maxSquare = maxSide * maxSide;\n        return maxSquare;\n    }\n}\n```\n\n```C++ [sol2-C++]\nclass Solution {\npublic:\n    int maximalSquare(vector<vector<char>>& matrix) {\n        if (matrix.size() == 0 || matrix[0].size() == 0) {\n            return 0;\n        }\n        int maxSide = 0;\n        int rows = matrix.size(), columns = matrix[0].size();\n        vector<vector<int>> dp(rows, vector<int>(columns));\n        for (int i = 0; i < rows; i++) {\n            for (int j = 0; j < columns; j++) {\n                if (matrix[i][j] == '1') {\n                    if (i == 0 || j == 0) {\n                        dp[i][j] = 1;\n                    } else {\n                        dp[i][j] = min(min(dp[i - 1][j], dp[i][j - 1]), dp[i - 1][j - 1]) + 1;\n                    }\n                    maxSide = max(maxSide, dp[i][j]);\n                }\n            }\n        }\n        int maxSquare = maxSide * maxSide;\n        return maxSquare;\n    }\n};\n```\n\n```Python [sol2-Python3]\nclass Solution:\n    def maximalSquare(self, matrix: List[List[str]]) -> int:\n        if len(matrix) == 0 or len(matrix[0]) == 0:\n            return 0\n        \n        maxSide = 0\n        rows, columns = len(matrix), len(matrix[0])\n        dp = [[0] * columns for _ in range(rows)]\n        for i in range(rows):\n            for j in range(columns):\n                if matrix[i][j] == '1':\n                    if i == 0 or j == 0:\n                        dp[i][j] = 1\n                    else:\n                        dp[i][j] = min(dp[i - 1][j], dp[i][j - 1], dp[i - 1][j - 1]) + 1\n                    maxSide = max(maxSide, dp[i][j])\n        \n        maxSquare = maxSide * maxSide\n        return maxSquare\n```\n\n```golang [sol2-Golang]\nfunc maximalSquare(matrix [][]byte) int {\n    dp := make([][]int, len(matrix))\n    maxSide := 0\n    for i := 0; i < len(matrix); i++ {\n        dp[i] = make([]int, len(matrix[i]))\n        for j := 0; j < len(matrix[i]); j++ {\n            dp[i][j] = int(matrix[i][j] - '0')\n            if dp[i][j] == 1 {\n                maxSide = 1\n            }\n        }\n    }\n\n    for i := 1; i < len(matrix); i++ {\n        for j := 1; j < len(matrix[i]); j++ {\n            if dp[i][j] == 1 {\n                dp[i][j] = min(min(dp[i-1][j], dp[i][j-1]), dp[i-1][j-1]) + 1\n                if dp[i][j] > maxSide {\n                    maxSide = dp[i][j]\n                }\n            }\n        }\n    }\n    return maxSide * maxSide\n}\n\nfunc min(x, y int) int {\n    if x < y {\n        return x\n    }\n    return y\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå…¶ä¸­ $m$ å’Œ $n$ æ˜¯çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ã€‚éœ€è¦éå†åŸå§‹çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ è®¡ç®— $\\textit{dp}$ çš„å€¼ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå…¶ä¸­ $m$ å’Œ $n$ æ˜¯çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ã€‚åˆ›å»ºäº†ä¸€ä¸ªå’ŒåŸå§‹çŸ©é˜µå¤§å°ç›¸åŒçš„çŸ©é˜µ $\\textit{dp}$ã€‚ç”±äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çš„ $\\textit{dp}(i, j)$ ç”±å…¶ä¸Šæ–¹ã€å·¦æ–¹å’Œå·¦ä¸Šæ–¹çš„ä¸‰ä¸ªç›¸é‚»ä½ç½®çš„ $\\textit{dp}$ å€¼å†³å®šï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªä¸€ç»´æ•°ç»„è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼Œç©ºé—´å¤æ‚åº¦ä¼˜åŒ–è‡³ $O(n)$ã€‚"
}