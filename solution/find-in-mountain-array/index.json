{
	"titleSlug": "find-in-mountain-array",
	"slug": "shan-mai-shu-zu-zhong-cha-zhao-mu-biao-zhi-by-leet",
	"url": "https://leetcode-cn.com/problems/find-in-mountain-array/solution/shan-mai-shu-zu-zhong-cha-zhao-mu-biao-zhi-by-leet/",
	"content": "### ğŸ“º è§†é¢‘é¢˜è§£\n\n![1095. å±±è„‰æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼.mp4](d7e78ecf-4b0a-458e-a6d6-cb95008ab63e)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n#### æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾\n\n**æ€è·¯**\n\næ˜¾ç„¶ï¼Œå¦‚æœå±±è„‰æ•°ç»„æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢æˆ–è€…å•è°ƒé€’å‡çš„åºåˆ—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡äºŒåˆ†æ³•è¿…é€Ÿæ‰¾åˆ°ç›®æ ‡å€¼ã€‚\n\nè€Œç°åœ¨é¢˜ç›®ä¸­æœ‰ä¸€ä¸ªå•è°ƒé€’å¢åºåˆ—ï¼ˆå³°å€¼å·¦è¾¹ï¼‰å’Œä¸€ä¸ªå•è°ƒé€’å‡åºåˆ—ï¼ˆå³°å€¼å³è¾¹ï¼‰ï¼Œæˆ‘ä»¬åªæ˜¯ä¸çŸ¥é“ä¸¤ä¸ªåºåˆ—çš„åˆ†å‰²ç‚¹ï¼Œå³å³°å€¼åœ¨å“ªé‡Œã€‚æ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥åº”è¯¥é¦–å…ˆæ‰¾åˆ°å³°å€¼ã€‚\n\nè€Œå³°å€¼ä¹Ÿå¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•å¯»æ‰¾ï¼š\n\nå¯¹äºä¸€ä¸ªèŒƒå›´ `[i, j]`ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‰¾åˆ°èŒƒå›´ `[i, j]` ä¸­é—´è¿ç»­çš„ä¸¤ä¸ªç‚¹ `mid` ä¸ `mid + 1`ã€‚å¦‚æœ `mountainArr.get(mid + 1) > mountainArr.get(mid)`ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å³°å€¼åœ¨èŒƒå›´ `[mid + 1, j]` å†…ï¼›å¦‚æœ `mountainArr.get(mid + 1) < mountainArr.get(mid)`ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å³°å€¼åœ¨èŒƒå›´ `[i, mid]` å†…ã€‚é€šè¿‡è¿™æ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ $O(\\log n)$ çš„æ—¶é—´å†…æ‰¾åˆ°å³°å€¼æ‰€å¤„çš„ä¸‹æ ‡ã€‚\n\n![fig1](https://assets.leetcode-cn.com/solution-static/1095/1095_fig1.png)\n\nè¿™ä¸ªæ–¹æ³•çš„æ­£ç¡®æ€§åœ¨äºæˆ‘ä»¬äºŒåˆ†çš„ç›®æ ‡æ˜¯ç›¸é‚»ä½ç½®æ•°çš„å·®å€¼ï¼Œæˆ‘ä»¬æ¯æ¬¡åˆ¤æ–­çš„æ˜¯ `mountainArr.get(mid + 1) - mountainArr.get(mid)` ä¸ `0` çš„å¤§å°å…³ç³»ã€‚è¿™ä¸ªå·®å€¼ç»„æˆçš„æ•°ç»„ä¿è¯äº†å•è°ƒé€’å¢çš„éƒ¨åˆ†å·®å€¼å‡ä¸ºæ­£æ•°ï¼Œå•è°ƒé€’å‡çš„éƒ¨åˆ†å·®å€¼å‡ä¸ºè´Ÿæ•°ï¼Œæ•´ä¸ªæ•°ç»„å‘ˆç° `[æ­£æ•°ï¼Œæ­£æ•°ï¼Œæ­£æ•°ï¼Œ...ï¼Œè´Ÿæ•°ï¼Œè´Ÿæ•°]` è¿™æ ·å‰åŠéƒ¨åˆ†å‡ä¸ºæ­£æ•°ï¼ŒååŠéƒ¨åˆ†å‡ä¸ºè´Ÿæ•°çš„æ€§è´¨ï¼Œæ»¡è¶³å•è°ƒæ€§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚\n\nä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œå·®åˆ†ï¼Œå³é™¤äº†ç¬¬ä¸€ä¸ªæ•°æ¯ä¸ªæ•°éƒ½å‡å»å‰ä¸€ä¸ªæ•°å¾—åˆ°æ–°çš„æ•°ç»„ï¼Œæœ€ç»ˆæˆ‘ä»¬å¾—åˆ° `[1, 1, 1, 1, -2, -2]`ï¼Œæ•´ä¸ªå·®åˆ†æ•°ç»„æ»¡è¶³å•è°ƒæ€§ï¼Œå¯ä»¥åº”ç”¨äºŒåˆ†æ³•ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨äºŒåˆ†æ³•åœ¨å•è°ƒåºåˆ—ä¸­æ‰¾åˆ°ç›®æ ‡å€¼å³å¯ï¼Œæ³¨æ„äºŒåˆ†æ³•è¦ä½¿ç”¨ä¸¤æ¬¡ï¼Œä¸ºäº†ç¼–ç ç®€æ´å¯ä»¥å°†äºŒåˆ†æ³•å°è£…æˆå‡½æ•°ã€‚\n\n**ç®—æ³•**\n\n- å…ˆä½¿ç”¨äºŒåˆ†æ³•æ‰¾åˆ°æ•°ç»„çš„å³°å€¼ã€‚\n\n- åœ¨å³°å€¼å·¦è¾¹ä½¿ç”¨äºŒåˆ†æ³•å¯»æ‰¾ç›®æ ‡å€¼ã€‚\n\n- å¦‚æœå³°å€¼å·¦è¾¹æ²¡æœ‰ç›®æ ‡å€¼ï¼Œé‚£ä¹ˆä½¿ç”¨äºŒåˆ†æ³•åœ¨å³°å€¼å³è¾¹å¯»æ‰¾ç›®æ ‡å€¼ã€‚\n\n```C++ [sol1-C++]\nclass Solution {\n    int binary_search(MountainArray &mountain, int target, int l, int r, int key(int)) {\n        target = key(target);\n        while (l <= r) {\n            int mid = (l + r) / 2;\n            int cur = key(mountain.get(mid));\n            if (cur == target) {\n                return mid;\n            } else if (cur < target) {\n                l = mid + 1;\n            } else {\n                r = mid - 1;\n            }\n        }\n        return -1;\n    }\npublic:\n    int findInMountainArray(int target, MountainArray &mountainArr) {\n        int l = 0, r = mountainArr.length() - 1;\n        while (l < r) {\n            int mid = (l + r) / 2;\n            if (mountainArr.get(mid) < mountainArr.get(mid + 1)) {\n                l = mid + 1;\n            } else {\n                r = mid;\n            }\n        }\n        \n        int peak = l;\n        int index = binary_search(mountainArr, target, 0, peak, [](int x) -> int{return x;});\n        if (index != -1) {\n            return index;\n        }\n        return binary_search(mountainArr, target, peak + 1, mountainArr.length() - 1, [](int x) -> int{return -x;});\n    }\n};\n```\n```Java [sol1-Java]\nclass Solution {\n    public int findInMountainArray(int target, MountainArray mountainArr) {\n        int l = 0, r = mountainArr.length() - 1;\n        while (l < r) {\n            int mid = (l + r) / 2;\n            if (mountainArr.get(mid) < mountainArr.get(mid + 1)) {\n                l = mid + 1;\n            } else {\n                r = mid;\n            }\n        }\n        int peak = l;\n        int index = binarySearch(mountainArr, target, 0, peak, true);\n        if (index != -1) {\n            return index;\n        }\n        return binarySearch(mountainArr, target, peak + 1, mountainArr.length() - 1, false);\n    }\n\n    public int binarySearch(MountainArray mountainArr, int target, int l, int r, boolean flag) {\n        if (!flag) {\n            target *= -1;\n        }\n        while (l <= r) {\n            int mid = (l + r) / 2;\n            int cur = mountainArr.get(mid) * (flag ? 1 : -1);\n            if (cur == target) {\n                return mid;\n            } else if (cur < target) {\n                l = mid + 1;\n            } else {\n                r = mid - 1;\n            }\n        }\n        return -1;\n    }\n}\n```\n```Python [sol1-Python3]\ndef binary_search(mountain, target, l, r, key=lambda x: x):\n    target = key(target)\n    while l <= r:\n        mid = (l + r) // 2\n        cur = key(mountain.get(mid))\n        if cur == target:\n            return mid\n        elif cur < target:\n            l = mid + 1\n        else:\n            r = mid - 1\n    return -1\n\nclass Solution:\n    def findInMountainArray(self, target: int, mountain_arr: 'MountainArray') -> int:\n        l, r = 0, mountain_arr.length() - 1\n        while l < r:\n            mid = (l + r) // 2\n            if mountain_arr.get(mid) < mountain_arr.get(mid + 1):\n                l = mid + 1\n            else:\n                r = mid\n        peak = l\n        index = binary_search(mountain_arr, target, 0, peak)\n        if index != -1:\n            return index\n        index = binary_search(mountain_arr, target, peak + 1, mountain_arr.length() - 1, lambda x: -x)\n        return index\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(\\log n)$ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸‰æ¬¡äºŒåˆ†æœç´¢ï¼Œæ¯æ¬¡çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º $O(\\log n)$ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œåªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚"
}